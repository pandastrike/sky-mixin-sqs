"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.times = exports.benchmark = exports.microseconds = exports.timer = exports.sleep = void 0;

var _pandaGarden = require("panda-garden");

var _pandaGenerics = require("panda-generics");

var _promise = require("./promise");

var _type = require("./type");

var _string = require("./string");

var benchmark, microseconds, sleep, timer, times;
exports.times = times;
exports.timer = timer;
exports.sleep = sleep;
exports.microseconds = microseconds;
exports.benchmark = benchmark;

exports.timer = timer = function (wait, action) {
  var id;
  id = setTimeout(action, wait);
  return function () {
    return clearTimeout(id);
  };
};

exports.sleep = sleep = function (interval) {
  return (0, _promise.promise)(function (resolve, reject) {
    return timer(interval, function () {
      return resolve();
    });
  });
};

exports.times = times = (0, _pandaGarden.curry)(function (fn, n) {
  var results;
  results = [];

  while (n-- !== 0) {
    results.push(fn());
  }

  return results;
});

exports.microseconds = microseconds = function () {
  var ref;

  if ((typeof process !== "undefined" && process !== null ? process.hrtime : void 0) != null) {
    return function () {
      var nanoseconds, seconds;
      [seconds, nanoseconds] = process.hrtime();
      return seconds * 1000000 + nanoseconds / 1000;
    };
  } else if ((typeof window !== "undefined" && window !== null ? (ref = window.performance) != null ? ref.now : void 0 : void 0) != null) {
    return function () {
      return window.performance.now();
    };
  } else {
    return function () {
      return Date.now() * 1000;
    };
  }
}();

exports.benchmark = benchmark = _pandaGenerics.Method.create();

_pandaGenerics.Method.define(benchmark, _type.isFunction, function (fn) {
  var start;
  start = microseconds();
  fn();
  return microseconds() - start;
});

_pandaGenerics.Method.define(benchmark, _type.isAsyncFunction, async function (fn) {
  var start;
  start = microseconds();
  await fn();
  return microseconds() - start;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtcGFyY2htZW50L3NyYy90aW1lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSkEsSUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQTs7Ozs7OztBQU1BLGdCQUFBLEtBQUEsR0FBUSxVQUFBLElBQUEsRUFBQSxNQUFBLEVBQUE7QUFDTixNQUFBLEVBQUE7QUFBQSxFQUFBLEVBQUEsR0FBSyxVQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBTDtTQUNBLFlBQUE7V0FBRyxZQUFBLENBQUEsRUFBQSxDO0FBQUgsRztBQUZNLENBQVI7O0FBSUEsZ0JBQUEsS0FBQSxHQUFRLFVBQUEsUUFBQSxFQUFBO1NBQ04sc0JBQVEsVUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBO1dBQ04sS0FBQSxDQUFBLFFBQUEsRUFBZ0IsWUFBQTthQUFHLE9BQUEsRTtBQUFuQixLQUFBLEM7QUFERixHQUFBLEM7QUFETSxDQUFSOztBQUlBLGdCQUFBLEtBQUEsR0FBUSx3QkFBTSxVQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUE7QUFBVyxNQUFBLE9BQUE7QUFBSyxFQUFBLE9BQUEsR0FBQSxFQUFBOztTQUFNLENBQUEsT0FBTixDLEVBQUE7aUJBQUwsRUFBQSxFO0FBQUs7OztBQUF0QixDQUFBLENBQVI7O0FBRUEsdUJBQUEsWUFBQSxHQUFrQixZQUFBO0FBQ2hCLE1BQUEsR0FBQTs7QUFBQSxNQUFHLENBQUEsT0FBQSxPQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsR0FBQSxLQUFBLENBQUEsS0FBSCxJQUFBLEVBQUE7V0FDRSxZQUFBO0FBQ0UsVUFBQSxXQUFBLEVBQUEsT0FBQTtBQUFBLE9BQUEsT0FBQSxFQUFBLFdBQUEsSUFBeUIsT0FBTyxDQUFQLE1BQUEsRUFBekI7YUFDQSxPQUFBLEdBQUEsT0FBQSxHQUFvQixXQUFBLEdBQWMsSTtBQUh0QyxLO0FBQUEsR0FBQSxNQUlLLElBQUcsQ0FBQSxPQUFBLE1BQUEsS0FBQSxXQUFBLElBQUEsTUFBQSxLQUFBLElBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxNQUFBLENBQUEsV0FBQSxLQUFBLElBQUEsR0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBLEtBQUEsQ0FBQSxHQUFBLEtBQUEsQ0FBQSxLQUFILElBQUEsRUFBQTtXQUNILFlBQUE7YUFBRyxNQUFNLENBQUMsV0FBUCxDQUFBLEdBQUEsRTtBQURBLEs7QUFBQSxHQUFBLE1BQUE7V0FHSCxZQUFBO2FBQUcsSUFBSSxDQUFKLEdBQUEsS0FBYSxJO0FBSGIsSzs7QUFMUSxDQUFHLEVBQWxCOztBQVVBLG9CQUFBLFNBQUEsR0FBWSxzQkFBQSxNQUFBLEVBQVo7O0FBRUEsc0JBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxnQkFBQSxFQUFxQyxVQUFBLEVBQUEsRUFBQTtBQUNuQyxNQUFBLEtBQUE7QUFBQSxFQUFBLEtBQUEsR0FBUSxZQUFBLEVBQVI7QUFDQSxFQUFBLEVBQUE7U0FDQSxZQUFBLEtBQWlCLEs7QUFIbkIsQ0FBQTs7QUFLQSxzQkFBQSxNQUFBLENBQUEsU0FBQSxFQUFBLHFCQUFBLEVBQTBDLGdCQUFBLEVBQUEsRUFBQTtBQUN4QyxNQUFBLEtBQUE7QUFBQSxFQUFBLEtBQUEsR0FBUSxZQUFBLEVBQVI7QUFDQSxRQUFNLEVBQUEsRUFBTjtTQUNBLFlBQUEsS0FBaUIsSztBQUhuQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjdXJyeX0gZnJvbSBcInBhbmRhLWdhcmRlblwiXG5pbXBvcnQge01ldGhvZH0gZnJvbSBcInBhbmRhLWdlbmVyaWNzXCJcbmltcG9ydCB7cHJvbWlzZSwgYXN5bmN9IGZyb20gXCIuL3Byb21pc2VcIlxuaW1wb3J0IHtpc0FycmF5LCBpc1N0cmluZywgaXNPYmplY3QsIGlzRnVuY3Rpb24sIGlzQXN5bmNGdW5jdGlvbn0gZnJvbSBcIi4vdHlwZVwiXG5pbXBvcnQge2JsYW5rfSBmcm9tIFwiLi9zdHJpbmdcIlxuXG50aW1lciA9ICh3YWl0LCBhY3Rpb24pIC0+XG4gIGlkID0gc2V0VGltZW91dChhY3Rpb24sIHdhaXQpXG4gIC0+IGNsZWFyVGltZW91dCggaWQgKVxuXG5zbGVlcCA9IChpbnRlcnZhbCkgLT5cbiAgcHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSAtPlxuICAgIHRpbWVyIGludGVydmFsLCAtPiByZXNvbHZlKClcblxudGltZXMgPSBjdXJyeSAoZm4sIG4pIC0+IGZuKCkgdW50aWwgbi0tID09IDBcblxubWljcm9zZWNvbmRzID0gZG8gLT5cbiAgaWYgcHJvY2Vzcz8uaHJ0aW1lP1xuICAgIC0+XG4gICAgICBbc2Vjb25kcywgbmFub3NlY29uZHNdID0gcHJvY2Vzcy5ocnRpbWUoKVxuICAgICAgc2Vjb25kcyAqIDEwMDAwMDAgKyBuYW5vc2Vjb25kcyAvIDEwMDBcbiAgZWxzZSBpZiB3aW5kb3c/LnBlcmZvcm1hbmNlPy5ub3c/XG4gICAgLT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gIGVsc2VcbiAgICAtPiBEYXRlLm5vdygpICogMTAwMFxuXG5iZW5jaG1hcmsgPSBNZXRob2QuY3JlYXRlKClcblxuTWV0aG9kLmRlZmluZSBiZW5jaG1hcmssIGlzRnVuY3Rpb24sIChmbikgLT5cbiAgc3RhcnQgPSBtaWNyb3NlY29uZHMoKVxuICBmbigpXG4gIG1pY3Jvc2Vjb25kcygpIC0gc3RhcnRcblxuTWV0aG9kLmRlZmluZSBiZW5jaG1hcmssIGlzQXN5bmNGdW5jdGlvbiwgKGZuKSAtPlxuICBzdGFydCA9IG1pY3Jvc2Vjb25kcygpXG4gIGF3YWl0IGZuKClcbiAgbWljcm9zZWNvbmRzKCkgLSBzdGFydFxuXG5leHBvcnQge3NsZWVwLCB0aW1lciwgbWljcm9zZWNvbmRzLCBiZW5jaG1hcmssIHRpbWVzfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/dyoder/repos/panda-parchment/src/time.coffee