"use strict";

var _assert = _interopRequireDefault(require("assert"));

var _amen = require("amen");

var _time = require("../src/time");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(async function () {
  return (0, _amen.print)((await (0, _amen.test)("time helpers", [(0, _amen.test)("timer", function () {
    var cancel, tooLate, x; // We need an action to put into "timer",
    // but we'll cancel it before it runs.

    x = 5;

    tooLate = function () {
      return x++;
    };

    cancel = (0, _time.timer)(10000, tooLate); // 10s is too long to wait.  Cancel it!!

    cancel();
    return (0, _assert.default)(x === 5); // We kept tooLong from executing.
  }), (0, _amen.test)("sleep", [(0, _amen.test)("microseconds/benchmark", async function () {
    return (0, _assert.default)((await (0, _time.benchmark)(async function () {
      return await (0, _time.sleep)(100);
    })) > 100 * 1000);
  })]), (0, _amen.test)("times", function () {
    var n;
    n = 0;
    return _assert.default.deepEqual((0, _time.times)(function () {
      return ++n;
    }, 3), [1, 2, 3]);
  })])));
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtcGFyY2htZW50L3Rlc3QvdGltZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFFQTs7OztBQUdHLENBQUEsa0JBQUE7U0FFRCxrQkFBTSxNQUFNLGdCQUFBLGNBQUEsRUFBcUIsQ0FFL0IsZ0JBQUEsT0FBQSxFQUFjLFlBQUE7QUFHWixRQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxDQUhZLEM7OztBQUdaLElBQUEsQ0FBQSxHQUFJLENBQUo7O0FBQ0EsSUFBQSxPQUFBLEdBQVUsWUFBQTthQUFHLENBQUEsRTtBQUFILEtBQVY7O0FBQ0EsSUFBQSxNQUFBLEdBQVMsaUJBQUEsS0FBQSxFQUZULE9BRVMsQ0FBVCxDQUxZLEM7O0FBUVosSUFBQSxNQUFBO1dBQ0EscUJBQU8sQ0FBQSxLQVRLLENBU1osQyxDQVRZLENBQUE7QUFGaUIsR0FFL0IsQ0FGK0IsRUFhL0IsZ0JBQUEsT0FBQSxFQUFjLENBQ1osZ0JBQUEsd0JBQUEsRUFBK0Isa0JBQUE7V0FDN0IscUJBQU8sQ0FBQyxNQUFNLHFCQUFXLGtCQUFBO0FBQUcsYUFBQSxNQUFNLGlCQUFOLEdBQU0sQ0FBTjtBQUFyQixLQUFPLENBQVAsSUFBMEMsTUFBakQsSUFBQSxDO0FBRlUsR0FDWixDQURZLENBQWQsQ0FiK0IsRUFrQi9CLGdCQUFBLE9BQUEsRUFBYyxZQUFBO0FBQ1osUUFBQSxDQUFBO0FBQUEsSUFBQSxDQUFBLEdBQUksQ0FBSjtXQUNBLGdCQUFBLFNBQUEsQ0FBa0IsaUJBQU8sWUFBQTthQUFHLEVBQUUsQztBQUFaLEtBQUEsRUFBbEIsQ0FBa0IsQ0FBbEIsRUFBc0MsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxFQUF0QyxDQUFzQyxDQUF0QyxDO0FBcEI2QixHQWtCL0IsQ0FsQitCLENBQXJCLENBQVosRTtBQUZGLENBQUciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIlxuaW1wb3J0IHt0ZXN0LCBwcmludH0gZnJvbSBcImFtZW5cIlxuXG5pbXBvcnQge3RpbWVzLCBzbGVlcCwgdGltZXIsIG1lbW9pemUsXG4gICAgYmVuY2htYXJrLCBlbXB0eSwgbGVuZ3RofSBmcm9tIFwiLi4vc3JjL3RpbWVcIlxuXG5kbyAtPlxuXG4gIHByaW50IGF3YWl0IHRlc3QgXCJ0aW1lIGhlbHBlcnNcIiwgW1xuXG4gICAgdGVzdCBcInRpbWVyXCIsIC0+XG4gICAgICAjIFdlIG5lZWQgYW4gYWN0aW9uIHRvIHB1dCBpbnRvIFwidGltZXJcIixcbiAgICAgICMgYnV0IHdlJ2xsIGNhbmNlbCBpdCBiZWZvcmUgaXQgcnVucy5cbiAgICAgIHggPSA1XG4gICAgICB0b29MYXRlID0gLT4geCsrXG4gICAgICBjYW5jZWwgPSB0aW1lciAxMDAwMCwgdG9vTGF0ZVxuXG4gICAgICAjIDEwcyBpcyB0b28gbG9uZyB0byB3YWl0LiAgQ2FuY2VsIGl0ISFcbiAgICAgIGNhbmNlbCgpXG4gICAgICBhc3NlcnQgeCA9PSA1ICAgIyBXZSBrZXB0IHRvb0xvbmcgZnJvbSBleGVjdXRpbmcuXG5cbiAgICB0ZXN0IFwic2xlZXBcIiwgW1xuICAgICAgdGVzdCBcIm1pY3Jvc2Vjb25kcy9iZW5jaG1hcmtcIiwgLT5cbiAgICAgICAgYXNzZXJ0IChhd2FpdCBiZW5jaG1hcmsgKC0+IGF3YWl0IHNsZWVwIDEwMCkpID4gKDEwMCAqIDEwMDApXG4gICAgXVxuXG4gICAgdGVzdCBcInRpbWVzXCIsIC0+XG4gICAgICBuID0gMFxuICAgICAgYXNzZXJ0LmRlZXBFcXVhbCAodGltZXMgKC0+ICsrbiksIDMpLCBbMSwgMiwgM11cbiBdXG4iXSwic291cmNlUm9vdCI6IiJ9
//# sourceURL=/Users/dyoder/repos/panda-parchment/test/time.coffee