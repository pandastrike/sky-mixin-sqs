var asyncIterator, isAsyncGeneratorFunction, isAsyncIterable, isAsyncIterator, isReactor, isReagent, reactor;
import { identity, curry, binary, negate } from "panda-garden";
import { Method } from "panda-generics";
import { isFunction, isType } from "panda-parchment";

if (Symbol.asyncIterator == null) {
  Symbol.asyncIterator = Symbol("asyncIterator");
}

isAsyncGeneratorFunction = function () {
  var f;

  f = async function* () {
    return yield await null;
  };

  return isType(f.constructor);
}();

isReagent = isAsyncIterable = function (x) {
  return isFunction(x != null ? x[Symbol.asyncIterator] : void 0) || isAsyncGeneratorFunction(x);
};

isReactor = isAsyncIterator = function (x) {
  return isFunction(x != null ? x.next : void 0) && isReagent(x);
};

reactor = asyncIterator = Method.create({
  default: "unable to create reactor from value"
});
Method.define(reactor, isFunction, function (f) {
  return {
    next: f,
    [Symbol.asyncIterator]: function () {
      return this;
    }
  };
});
Method.define(reactor, isReagent, function (r) {
  return r[Symbol.asyncIterator]();
});
Method.define(reactor, isAsyncGeneratorFunction, function (g) {
  return g();
});
Method.define(reactor, isReactor, function (r) {
  return r;
});
export { isReagent, reactor, isReactor };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtcml2ZXIvc3JjL3JlYWN0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsYUFBQSxFQUFBLHdCQUFBLEVBQUEsZUFBQSxFQUFBLGVBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUE7QUFBQSxTQUFBLFFBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsUUFBQSxjQUFBO0FBQ0EsU0FBQSxNQUFBLFFBQUEsZ0JBQUE7QUFDQSxTQUFBLFVBQUEsRUFBQSxNQUFBLFFBQUEsaUJBQUE7OztBQUVBLEVBQUEsTUFBTSxDQUFDLGFBQVAsR0FBd0IsTUFBQSxDQUFBLGVBQUEsQ0FBeEI7OztBQUVBLHdCQUFBLEdBQThCLFlBQUE7QUFDNUIsTUFBQSxDQUFBOztBQUFBLEVBQUEsQ0FBQSxHQUFJLG1CQUFBO0FBQUcsV0FBQSxNQUFNLE1BQU4sSUFBQTtBQUFILEdBQUo7O1NBQ0EsTUFBQSxDQUFPLENBQUMsQ0FBUixXQUFBLEM7QUFGeUIsQ0FBRyxFQUE5Qjs7QUFJQSxTQUFBLEdBQVksZUFBQSxHQUFrQixVQUFBLENBQUEsRUFBQTtTQUMzQixVQUFBLENBQUEsQ0FBQSxJQUFBLElBQUEsR0FBVyxDQUFHLENBQUEsTUFBTSxDQUFOLGFBQUEsQ0FBZCxHQUFjLEtBQWYsQ0FBQyxDQUFELElBQTBDLHdCQUFBLENBQUQsQ0FBQyxDO0FBRGQsQ0FBOUI7O0FBR0EsU0FBQSxHQUFZLGVBQUEsR0FBa0IsVUFBQSxDQUFBLEVBQUE7U0FBUSxVQUFBLENBQUEsQ0FBQSxJQUFBLElBQUEsR0FBVyxDQUFDLENBQUUsSUFBZCxHQUFjLEtBQWYsQ0FBQyxDQUFELElBQXlCLFNBQUEsQ0FBRCxDQUFDLEM7QUFBaEMsQ0FBOUI7O0FBRUEsT0FBQSxHQUFVLGFBQUEsR0FBZ0IsTUFBTSxDQUFOLE1BQUEsQ0FDeEI7QUFBQSxFQUFBLE9BQUEsRUFBUztBQUFULENBRHdCLENBQTFCO0FBR0EsTUFBTSxDQUFOLE1BQUEsQ0FBQSxPQUFBLEVBQUEsVUFBQSxFQUFtQyxVQUFBLENBQUEsRUFBQTtTQUNqQztBQUFBLElBQUEsSUFBQSxFQUFBLENBQUE7QUFDQSxLQUFDLE1BQU0sQ0FBUCxhQUFBLEdBQXdCLFlBQUE7YUFBRyxJO0FBQUg7QUFEeEIsRztBQURGLENBQUE7QUFJQSxNQUFNLENBQU4sTUFBQSxDQUFBLE9BQUEsRUFBQSxTQUFBLEVBQWtDLFVBQUEsQ0FBQSxFQUFBO1NBQU8sQ0FBRSxDQUFBLE1BQU0sQ0FBUixhQUFFLENBQUYsRTtBQUF6QyxDQUFBO0FBRUEsTUFBTSxDQUFOLE1BQUEsQ0FBQSxPQUFBLEVBQUEsd0JBQUEsRUFBaUQsVUFBQSxDQUFBLEVBQUE7U0FBTyxDQUFBLEU7QUFBeEQsQ0FBQTtBQUVBLE1BQU0sQ0FBTixNQUFBLENBQUEsT0FBQSxFQUFBLFNBQUEsRUFBa0MsVUFBQSxDQUFBLEVBQUE7U0FBTyxDO0FBQXpDLENBQUE7QUFFQSxTQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aWRlbnRpdHksIGN1cnJ5LCBiaW5hcnksIG5lZ2F0ZX0gZnJvbSBcInBhbmRhLWdhcmRlblwiXG5pbXBvcnQge01ldGhvZH0gZnJvbSBcInBhbmRhLWdlbmVyaWNzXCJcbmltcG9ydCB7aXNGdW5jdGlvbiwgaXNUeXBlfSBmcm9tIFwicGFuZGEtcGFyY2htZW50XCJcblxuU3ltYm9sLmFzeW5jSXRlcmF0b3IgPz0gU3ltYm9sIFwiYXN5bmNJdGVyYXRvclwiXG5cbmlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiA9IGRvIC0+XG4gIGYgPSAtPiB5aWVsZCBhd2FpdCBudWxsXG4gIGlzVHlwZSBmLmNvbnN0cnVjdG9yXG5cbmlzUmVhZ2VudCA9IGlzQXN5bmNJdGVyYWJsZSA9ICh4KSAtPlxuICAoaXNGdW5jdGlvbiB4P1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0pIHx8IChpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24geClcblxuaXNSZWFjdG9yID0gaXNBc3luY0l0ZXJhdG9yID0gKHgpIC0+IChpc0Z1bmN0aW9uIHg/Lm5leHQpICYmIChpc1JlYWdlbnQgeClcblxucmVhY3RvciA9IGFzeW5jSXRlcmF0b3IgPSBNZXRob2QuY3JlYXRlXG4gIGRlZmF1bHQ6IFwidW5hYmxlIHRvIGNyZWF0ZSByZWFjdG9yIGZyb20gdmFsdWVcIlxuXG5NZXRob2QuZGVmaW5lIHJlYWN0b3IsIGlzRnVuY3Rpb24sIChmKSAtPlxuICBuZXh0OiBmXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl06IC0+IEBcblxuTWV0aG9kLmRlZmluZSByZWFjdG9yLCBpc1JlYWdlbnQsIChyKSAtPiByW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpXG5cbk1ldGhvZC5kZWZpbmUgcmVhY3RvciwgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uLCAoZykgLT4gZygpXG5cbk1ldGhvZC5kZWZpbmUgcmVhY3RvciwgaXNSZWFjdG9yLCAocikgLT4gclxuXG5leHBvcnQge2lzUmVhZ2VudCwgcmVhY3RvciwgaXNSZWFjdG9yfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/dyoder/repos/panda-river/src/reactor.coffee