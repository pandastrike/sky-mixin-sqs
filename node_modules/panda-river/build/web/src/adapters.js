var events, flow, go, into, isFunctionList, isProducer, pool, producer, queue, read, repeat, union, wait;
import { Method } from "panda-generics";
import { identity, curry, binary, compose, pipe, flip } from "panda-garden";
import { promise, follow, reject, all, isDefined, isArray, isFunction, isPromise } from "panda-parchment";
import { isIterable, isIterator, iterator } from "./iterator";
import { isReagent, isReactor, reactor } from "./reactor";
import { start, collect } from "./reducers"; // isProducer

isProducer = function (x) {
  return isIterator(x) || isReactor(x);
}; // producer


producer = Method.create({
  description: "Attempts to turn its argument into an iterator or reactor."
});
Method.define(producer, isIterable, function (x) {
  return iterator(x);
});
Method.define(producer, isReagent, function (x) {
  return reactor(x);
});
Method.define(producer, isProducer, identity); // repeat

repeat = function* (x) {
  while (true) {
    yield x;
  }
}; // queue


queue = function () {
  var dq, p, q;
  q = [];
  p = [];
  return {
    enqueue: function (value) {
      var resolve;

      if (p.length > 0) {
        resolve = p.shift();
        return resolve(value);
      } else {
        return q.push(value);
      }
    },
    dequeue: dq = function () {
      if (q.length > 0) {
        return follow(q.shift());
      } else {
        return promise(function (resolve) {
          return p.push(resolve);
        });
      }
    },
    idle: function () {
      return p.length === 0 && q.length === 0;
    }
  };
}; // events


events = curry(async function* (name, source) {
  var q, results;
  q = queue();

  if (source.on != null) {
    source.on(name, function (event) {
      return q.enqueue(event);
    });
  } else if (source.addEventListener != null) {
    source.addEventListener(name, function (event) {
      return q.enqueue(event);
    });
  } else {
    throw new TypeError("events: source must support `on` or `addEventListener` method");
  }

  results = [];

  while (true) {
    results.push((yield await q.dequeue()));
  }

  return results;
}); // read

read = async function* (s) {
  var data, end, q, results;
  q = queue();
  end = false;
  s.on("data", function (data) {
    return q.enqueue(data);
  });
  s.on("error", function (error) {
    return q.enqueue(reject(error));
  });
  s.on("end", function () {
    end = true;
    return q.enqueue(void 0);
  });
  results = [];

  while (true) {
    data = await q.dequeue();

    if (end) {
      break;
    } else {
      results.push((yield data));
    }
  }

  return results;
}; // union


union = async function* (...px) {
  var done, i, len, p, q, results;
  q = queue();
  done = 0;

  for (i = 0, len = px.length; i < len; i++) {
    p = px[i];

    (async function (p) {
      var x;

      for await (x of p) {
        q.enqueue(x);
      }

      return done++;
    })(p);
  }

  while (true) {
    yield await q.dequeue();

    if (done === px.length) {
      break;
    }
  }

  results = [];

  while (!q.idle()) {
    results.push((yield await q.dequeue()));
  }

  return results;
}; // flow


isFunctionList = function (...fx) {
  var f, i, len;

  for (i = 0, len = fx.length; i < len; i++) {
    f = fx[i];

    if (!isFunction(f)) {
      return false;
    }
  }

  return true;
};

flow = Method.create({
  description: "Compose functions and a producer."
}); // check for promise

Method.define(flow, isDefined, isArray, function (x, ax) {
  return flow(x, ...ax);
});
Method.define(flow, isDefined, isFunctionList, function (x, ...fx) {
  return flow(x, pipe(...fx));
});
Method.define(flow, isDefined, isFunction, function (x, f) {
  return flow(producer(x), f);
});
Method.define(flow, isPromise, isFunction, async function (x, f) {
  return flow((await x), f);
});
Method.define(flow, isProducer, isFunction, function (p, f) {
  return f(p);
});
Method.define(flow, isArray, function (ax) {
  return flow(...ax);
});
go = compose(start, flow);
into = curry(binary(flip(go)));
wait = curry(async function* (filter, producer) {
  var ref, results, x;
  ref = filter(producer);
  results = [];

  for await (x of ref) {
    results.push((yield await x));
  }

  return results;
});
pool = curry(async function* (filter, producer) {
  var i, len, ref, results, x;
  ref = await all(collect(filter(producer)));
  results = [];

  for (i = 0, len = ref.length; i < len; i++) {
    x = ref[i];
    results.push((yield x));
  }

  return results;
});
export { isProducer, producer, repeat, events, read, union, flow, go, into, wait, pool };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtcml2ZXIvc3JjL2FkYXB0ZXJzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxjQUFBLEVBQUEsVUFBQSxFQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLElBQUE7QUFBQSxTQUFBLE1BQUEsUUFBQSxnQkFBQTtBQUNBLFNBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLFFBQUEsY0FBQTtBQUNBLFNBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsVUFBQSxFQUFBLFNBQUEsUUFBQSxpQkFBQTtBQUdBLFNBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLFFBQUEsWUFBQTtBQUNBLFNBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLFFBQUEsV0FBQTtBQUNBLFNBQUEsS0FBQSxFQUFBLE9BQUEsUUFQQSxZQU9BLEM7O0FBSUEsVUFBQSxHQUFhLFVBQUEsQ0FBQSxFQUFBO1NBQVEsVUFBQSxDQUFELENBQUMsQ0FBRCxJQUFtQixTQUFBLENBQUQsQ0FBQyxDO0FBWHZDLENBV0EsQzs7O0FBSUEsUUFBQSxHQUFXLE1BQU0sQ0FBTixNQUFBLENBQ1Q7QUFBQSxFQUFBLFdBQUEsRUFBYTtBQUFiLENBRFMsQ0FBWDtBQUdBLE1BQU0sQ0FBTixNQUFBLENBQUEsUUFBQSxFQUFBLFVBQUEsRUFBb0MsVUFBQSxDQUFBLEVBQUE7U0FBTyxRQUFBLENBQUEsQ0FBQSxDO0FBQTNDLENBQUE7QUFDQSxNQUFNLENBQU4sTUFBQSxDQUFBLFFBQUEsRUFBQSxTQUFBLEVBQW1DLFVBQUEsQ0FBQSxFQUFBO1NBQU8sT0FBQSxDQUFBLENBQUEsQztBQUExQyxDQUFBO0FBQ0EsTUFBTSxDQUFOLE1BQUEsQ0FBQSxRQUFBLEVBQUEsVUFBQSxFQXBCQSxRQW9CQSxFOztBQUlBLE1BQUEsR0FBUyxXQUFBLENBQUEsRUFBQTtBQUFPLFNBQUEsSUFBQSxFQUFBO0FBQUssVUFBTSxDQUFOO0FBQUw7QUF4QmhCLENBd0JBLEM7OztBQUlBLEtBQUEsR0FBUSxZQUFBO0FBQ04sTUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUE7QUFBQSxFQUFBLENBQUEsR0FBSSxFQUFKO0FBQ0EsRUFBQSxDQUFBLEdBQUksRUFBSjtTQUNBO0FBQUEsSUFBQSxPQUFBLEVBQVMsVUFBQSxLQUFBLEVBQUE7QUFDUCxVQUFBLE9BQUE7O0FBQUEsVUFBRyxDQUFDLENBQUQsTUFBQSxHQUFILENBQUEsRUFBQTtBQUNFLFFBQUEsT0FBQSxHQUFVLENBQUMsQ0FBRCxLQUFBLEVBQVY7ZUFDQSxPQUFBLENBRkYsS0FFRSxDO0FBRkYsT0FBQSxNQUFBO2VBSUUsQ0FBQyxDQUFELElBQUEsQ0FKRixLQUlFLEM7O0FBTEosS0FBQTtBQU1BLElBQUEsT0FBQSxFQUFTLEVBQUEsR0FBSyxZQUFBO0FBQ1osVUFBRyxDQUFDLENBQUQsTUFBQSxHQUFILENBQUEsRUFBQTtlQUNFLE1BQUEsQ0FBTyxDQUFDLENBRFYsS0FDUyxFQUFQLEM7QUFERixPQUFBLE1BQUE7ZUFHRSxPQUFBLENBQVEsVUFBQSxPQUFBLEVBQUE7aUJBQWEsQ0FBQyxDQUFELElBQUEsQ0FBQSxPQUFBLEM7QUFIdkIsU0FHRSxDOztBQVZKLEtBQUE7QUFXQSxJQUFBLElBQUEsRUFBTSxZQUFBO2FBQUcsQ0FBQyxDQUFELE1BQUEsS0FBQSxDQUFBLElBQWlCLENBQUMsQ0FBRCxNQUFBLEtBQVksQztBQUFoQztBQVhOLEc7QUEvQkYsQ0E0QkEsQzs7O0FBa0JBLE1BQUEsR0FBUyxLQUFBLENBQU0saUJBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQTtBQUNiLE1BQUEsQ0FBQSxFQUFBLE9BQUE7QUFBQSxFQUFBLENBQUEsR0FBSSxLQUFBLEVBQUo7O0FBQ0EsTUFBRyxNQUFBLENBQUEsRUFBQSxJQUFILElBQUEsRUFBQTtBQUNFLElBQUEsTUFBTSxDQUFOLEVBQUEsQ0FBQSxJQUFBLEVBQWdCLFVBQUEsS0FBQSxFQUFBO2FBQVcsQ0FBQyxDQUFELE9BQUEsQ0FBQSxLQUFBLEM7QUFEN0IsS0FDRTtBQURGLEdBQUEsTUFFSyxJQUFHLE1BQUEsQ0FBQSxnQkFBQSxJQUFILElBQUEsRUFBQTtBQUNILElBQUEsTUFBTSxDQUFOLGdCQUFBLENBQUEsSUFBQSxFQUE4QixVQUFBLEtBQUEsRUFBQTthQUFXLENBQUMsQ0FBRCxPQUFBLENBQUEsS0FBQSxDO0FBRHRDLEtBQ0g7QUFERyxHQUFBLE1BQUE7QUFFQSxVQUFNLElBQUEsU0FBQSxDQUZOLCtEQUVNLENBQU47OztBQUVMLEVBQUEsT0FBQSxHQUFBLEVBQUE7O1NBQUEsSSxFQUFBO1lBQUssSSxFQUFBLE1BQU0sTUFBTSxDQUFDLENBQWIsT0FBWSxFO0FBQWpCOzs7QUF0REYsQ0E4Q1MsQ0FBVCxDOztBQVlBLElBQUEsR0FBTyxpQkFBQSxDQUFBLEVBQUE7QUFDTCxNQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLE9BQUE7QUFBQSxFQUFBLENBQUEsR0FBSSxLQUFBLEVBQUo7QUFDQSxFQUFBLEdBQUEsR0FBTSxLQUFOO0FBQ0EsRUFBQSxDQUFDLENBQUQsRUFBQSxDQUFBLE1BQUEsRUFBYSxVQUFBLElBQUEsRUFBQTtXQUFVLENBQUMsQ0FBRCxPQUFBLENBQUEsSUFBQSxDO0FBQXZCLEdBQUE7QUFDQSxFQUFBLENBQUMsQ0FBRCxFQUFBLENBQUEsT0FBQSxFQUFjLFVBQUEsS0FBQSxFQUFBO1dBQVcsQ0FBQyxDQUFELE9BQUEsQ0FBVSxNQUFBLENBQVYsS0FBVSxDQUFWLEM7QUFBekIsR0FBQTtBQUNBLEVBQUEsQ0FBQyxDQUFELEVBQUEsQ0FBQSxLQUFBLEVBQVksWUFBQTtBQUNWLElBQUEsR0FBQSxHQUFNLElBQU47V0FDQSxDQUFDLENBQUQsT0FBQSxDQUFVLEtBQVYsQ0FBQSxDO0FBRkYsR0FBQTtBQUlBLEVBQUEsT0FBQSxHQUFBLEVBQUE7O1NBQUEsSSxFQUFBO0FBQ0UsSUFBQSxJQUFBLEdBQU8sTUFBTSxDQUFDLENBQVAsT0FBTSxFQUFiOztBQUNBLFFBQUEsR0FBQSxFQUFBO0FBQUE7QUFBQSxLQUFBLE1BQUE7Y0FBdUIsSSxFQUFBLE1BQXZCLEk7O0FBRkY7OztBQW5FRixDQTBEQSxDOzs7QUFlQSxLQUFBLEdBQVEsaUJBQUEsR0FBQSxFQUFBLEVBQUE7QUFDTixNQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsT0FBQTtBQUFBLEVBQUEsQ0FBQSxHQUFJLEtBQUEsRUFBSjtBQUNBLEVBQUEsSUFBQSxHQUFPLENBQVA7O0FBQ0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsTUFBQSxFQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUE7OztBQUNLLEtBQUEsZ0JBQUEsQ0FBQSxFQUFBO0FBQ0QsVUFBQSxDQUFBOztBQUFZLGlCQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFBWixRQUFBLENBQUMsQ0FBRCxPQUFBLENBQUEsQ0FBQTtBQUFZOzthQUNaLElBQUEsRTtBQUZGLEtBQUcsRUFBSCxDQUFHO0FBREw7O0FBSUEsU0FBQSxJQUFBLEVBQUE7QUFDRSxVQUFNLE1BQU0sQ0FBQyxDQUFQLE9BQU0sRUFBWjs7QUFDQSxRQUFTLElBQUEsS0FBUSxFQUFFLENBQW5CLE1BQUEsRUFBQTtBQUFBOztBQUZGOztBQUd3QixFQUFBLE9BQUEsR0FBQSxFQUFBOztTQUFBLENBQU0sQ0FBQyxDQUFQLElBQU0sRSxFQUFOO1lBQXhCLEksRUFBQSxNQUFNLE1BQU0sQ0FBQyxDQUFiLE9BQVksRTtBQUFZOzs7QUFuRjFCLENBeUVBLEM7OztBQWNBLGNBQUEsR0FBaUIsVUFBQSxHQUFBLEVBQUEsRUFBQTtBQUNmLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBOztBQUFhLE9BQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBOzs7UUFBaUIsQ0FBQyxVQUFBLENBQUEsQ0FBQSxDLEVBQUE7QUFBL0IsYUFBTyxLQUFQOztBQUFhOztTQUNiLEk7QUFGZSxDQUFqQjs7QUFJQSxJQUFBLEdBQU8sTUFBTSxDQUFOLE1BQUEsQ0FDTDtBQUFBLEVBQUEsV0FBQSxFQUFhO0FBQWIsQ0FESyxDQUFQLEM7O0FBS0EsTUFBTSxDQUFOLE1BQUEsQ0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBd0MsVUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBO1NBQVcsSUFBQSxDQUFBLENBQUEsRUFBUSxHQUFSLEVBQUEsQztBQUFuRCxDQUFBO0FBQ0EsTUFBTSxDQUFOLE1BQUEsQ0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsRUFBK0MsVUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUE7U0FBYyxJQUFBLENBQUEsQ0FBQSxFQUFRLElBQUEsQ0FBSyxHQUFiLEVBQVEsQ0FBUixDO0FBQTdELENBQUE7QUFDQSxNQUFNLENBQU4sTUFBQSxDQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxFQUEyQyxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7U0FBVSxJQUFBLENBQU0sUUFBQSxDQUFOLENBQU0sQ0FBTixFQUFBLENBQUEsQztBQUFyRCxDQUFBO0FBQ0EsTUFBTSxDQUFOLE1BQUEsQ0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsRUFBMkMsZ0JBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtTQUFVLElBQUEsRUFBTSxNQUFOLENBQUEsR0FBQSxDQUFBLEM7QUFBckQsQ0FBQTtBQUNBLE1BQU0sQ0FBTixNQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsRUFBQSxVQUFBLEVBQTRDLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtTQUFVLENBQUEsQ0FBQSxDQUFBLEM7QUFBdEQsQ0FBQTtBQUNBLE1BQU0sQ0FBTixNQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsRUFBNkIsVUFBQSxFQUFBLEVBQUE7U0FBUSxJQUFBLENBQUssR0FBTCxFQUFBLEM7QUFBckMsQ0FBQTtBQUVBLEVBQUEsR0FBSyxPQUFBLENBQUEsS0FBQSxFQUFBLElBQUEsQ0FBTDtBQUVBLElBQUEsR0FBTyxLQUFBLENBQU0sTUFBQSxDQUFPLElBQUEsQ0FBYixFQUFhLENBQVAsQ0FBTixDQUFQO0FBRUEsSUFBQSxHQUFPLEtBQUEsQ0FBTSxpQkFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBO0FBQ1gsTUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLENBQUE7QUFBYyxFQUFBLEdBQUEsR0FBQSxNQUFBLENBQUEsUUFBQSxDQUFBO0FBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQTs7QUFBQSxhQUFBLENBQUEsSUFBQSxHQUFBLEVBQUE7WUFBZCxJLEVBQUEsTUFBTSxNQUFOLEM7QUFBYzs7O0FBRFQsQ0FBQSxDQUFQO0FBR0EsSUFBQSxHQUFPLEtBQUEsQ0FBTSxpQkFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBO0FBQ1gsTUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQTtBQUFRLEVBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxDQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsQ0FBQTtBQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUE7O0FBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsTUFBQSxFQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUE7O1lBQVIsSSxFQUFBLE1BQUEsQztBQUFROzs7QUFESCxDQUFBLENBQVA7QUFHQSxTQUFBLFVBQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtNZXRob2R9IGZyb20gXCJwYW5kYS1nZW5lcmljc1wiXG5pbXBvcnQge2lkZW50aXR5LCBjdXJyeSwgYmluYXJ5LCBjb21wb3NlLCBwaXBlLCBmbGlwfSBmcm9tIFwicGFuZGEtZ2FyZGVuXCJcbmltcG9ydCB7cHJvbWlzZSwgZm9sbG93LCByZWplY3QsIGFsbCxcbiAgaXNEZWZpbmVkLCBpc0FycmF5LCBpc0Z1bmN0aW9uLCBpc1Byb21pc2V9IGZyb20gXCJwYW5kYS1wYXJjaG1lbnRcIlxuXG5pbXBvcnQge2lzSXRlcmFibGUsIGlzSXRlcmF0b3IsIGl0ZXJhdG9yfSBmcm9tIFwiLi9pdGVyYXRvclwiXG5pbXBvcnQge2lzUmVhZ2VudCwgaXNSZWFjdG9yLCByZWFjdG9yfSBmcm9tIFwiLi9yZWFjdG9yXCJcbmltcG9ydCB7c3RhcnQsIGNvbGxlY3R9IGZyb20gXCIuL3JlZHVjZXJzXCJcblxuIyBpc1Byb2R1Y2VyXG5cbmlzUHJvZHVjZXIgPSAoeCkgLT4gKGlzSXRlcmF0b3IgeCkgfHwgKGlzUmVhY3RvciB4KVxuXG4jIHByb2R1Y2VyXG5cbnByb2R1Y2VyID0gTWV0aG9kLmNyZWF0ZVxuICBkZXNjcmlwdGlvbjogXCJBdHRlbXB0cyB0byB0dXJuIGl0cyBhcmd1bWVudCBpbnRvIGFuIGl0ZXJhdG9yIG9yIHJlYWN0b3IuXCJcblxuTWV0aG9kLmRlZmluZSBwcm9kdWNlciwgaXNJdGVyYWJsZSwgKHgpIC0+IGl0ZXJhdG9yIHhcbk1ldGhvZC5kZWZpbmUgcHJvZHVjZXIsIGlzUmVhZ2VudCwgKHgpIC0+IHJlYWN0b3IgeFxuTWV0aG9kLmRlZmluZSBwcm9kdWNlciwgaXNQcm9kdWNlciwgaWRlbnRpdHlcblxuIyByZXBlYXRcblxucmVwZWF0ID0gKHgpIC0+IGxvb3AgeWllbGQgeCA7IHJldHVyblxuXG4jIHF1ZXVlXG5cbnF1ZXVlID0gLT5cbiAgcSA9IFtdXG4gIHAgPSBbXVxuICBlbnF1ZXVlOiAodmFsdWUpIC0+XG4gICAgaWYgcC5sZW5ndGggPiAwXG4gICAgICByZXNvbHZlID0gcC5zaGlmdCgpXG4gICAgICByZXNvbHZlIHZhbHVlXG4gICAgZWxzZVxuICAgICAgcS5wdXNoIHZhbHVlXG4gIGRlcXVldWU6IGRxID0gLT5cbiAgICBpZiBxLmxlbmd0aCA+IDBcbiAgICAgIGZvbGxvdyBxLnNoaWZ0KClcbiAgICBlbHNlXG4gICAgICBwcm9taXNlIChyZXNvbHZlKSAtPiBwLnB1c2ggcmVzb2x2ZVxuICBpZGxlOiAtPiBwLmxlbmd0aCA9PSAwICYmIHEubGVuZ3RoID09IDBcblxuIyBldmVudHNcblxuZXZlbnRzID0gY3VycnkgKG5hbWUsIHNvdXJjZSkgLT5cbiAgcSA9IHF1ZXVlKClcbiAgaWYgc291cmNlLm9uP1xuICAgIHNvdXJjZS5vbiBuYW1lLCAoZXZlbnQpIC0+IHEuZW5xdWV1ZSBldmVudFxuICBlbHNlIGlmIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyP1xuICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyIG5hbWUsIChldmVudCkgLT4gcS5lbnF1ZXVlIGV2ZW50XG4gIGVsc2UgdGhyb3cgbmV3IFR5cGVFcnJvciBcImV2ZW50czogc291cmNlIG11c3Qgc3VwcG9ydFxuICAgIGBvbmAgb3IgYGFkZEV2ZW50TGlzdGVuZXJgIG1ldGhvZFwiXG4gIGxvb3AgeWllbGQgYXdhaXQgcS5kZXF1ZXVlKClcblxuIyByZWFkXG5cbnJlYWQgPSAocykgLT5cbiAgcSA9IHF1ZXVlKClcbiAgZW5kID0gZmFsc2VcbiAgcy5vbiBcImRhdGFcIiwgKGRhdGEpIC0+IHEuZW5xdWV1ZSBkYXRhXG4gIHMub24gXCJlcnJvclwiLCAoZXJyb3IpIC0+IHEuZW5xdWV1ZSByZWplY3QgZXJyb3JcbiAgcy5vbiBcImVuZFwiLCAtPlxuICAgIGVuZCA9IHRydWVcbiAgICBxLmVucXVldWUgdW5kZWZpbmVkXG5cbiAgbG9vcFxuICAgIGRhdGEgPSBhd2FpdCBxLmRlcXVldWUoKVxuICAgIGlmIGVuZCB0aGVuIGJyZWFrIGVsc2UgeWllbGQgZGF0YVxuXG4jIHVuaW9uXG5cbnVuaW9uID0gKHB4Li4uKSAtPlxuICBxID0gcXVldWUoKVxuICBkb25lID0gMFxuICBmb3IgcCBpbiBweFxuICAgIGRvIChwKSAtPlxuICAgICAgcS5lbnF1ZXVlIHggZm9yIGF3YWl0IHggZnJvbSBwXG4gICAgICBkb25lKytcbiAgbG9vcFxuICAgIHlpZWxkIGF3YWl0IHEuZGVxdWV1ZSgpXG4gICAgYnJlYWsgaWYgZG9uZSA9PSBweC5sZW5ndGhcbiAgeWllbGQgYXdhaXQgcS5kZXF1ZXVlKCkgdW50aWwgcS5pZGxlKClcblxuIyBmbG93XG5cbmlzRnVuY3Rpb25MaXN0ID0gKGZ4Li4uKSAtPlxuICByZXR1cm4gZmFsc2UgZm9yIGYgaW4gZnggd2hlbiAhaXNGdW5jdGlvbiBmXG4gIHRydWVcblxuZmxvdyA9IE1ldGhvZC5jcmVhdGVcbiAgZGVzY3JpcHRpb246IFwiQ29tcG9zZSBmdW5jdGlvbnMgYW5kIGEgcHJvZHVjZXIuXCJcblxuIyBjaGVjayBmb3IgcHJvbWlzZVxuXG5NZXRob2QuZGVmaW5lIGZsb3csIGlzRGVmaW5lZCwgaXNBcnJheSwgKHgsIGF4KSAtPiBmbG93IHgsIGF4Li4uXG5NZXRob2QuZGVmaW5lIGZsb3csIGlzRGVmaW5lZCwgaXNGdW5jdGlvbkxpc3QsICh4LCBmeC4uLikgLT4gZmxvdyB4LCBwaXBlIGZ4Li4uXG5NZXRob2QuZGVmaW5lIGZsb3csIGlzRGVmaW5lZCwgaXNGdW5jdGlvbiwgKHgsIGYpIC0+IGZsb3cgKHByb2R1Y2VyIHgpLCBmXG5NZXRob2QuZGVmaW5lIGZsb3csIGlzUHJvbWlzZSwgaXNGdW5jdGlvbiwgKHgsIGYpIC0+IGZsb3cgKGF3YWl0IHgpLCBmXG5NZXRob2QuZGVmaW5lIGZsb3csIGlzUHJvZHVjZXIsIGlzRnVuY3Rpb24sIChwLCBmKSAtPiBmIHBcbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNBcnJheSwgKGF4KSAtPiBmbG93IGF4Li4uXG5cbmdvID0gY29tcG9zZSBzdGFydCwgZmxvd1xuXG5pbnRvID0gY3VycnkgYmluYXJ5IGZsaXAgZ29cblxud2FpdCA9IGN1cnJ5IChmaWx0ZXIsIHByb2R1Y2VyKSAtPlxuICB5aWVsZCBhd2FpdCB4IGZvciBhd2FpdCB4IGZyb20gZmlsdGVyIHByb2R1Y2VyXG5cbnBvb2wgPSBjdXJyeSAoZmlsdGVyLCBwcm9kdWNlcikgLT5cbiAgeWllbGQgeCBmb3IgeCBpbiBhd2FpdCBhbGwgY29sbGVjdCBmaWx0ZXIgcHJvZHVjZXJcblxuZXhwb3J0IHtpc1Byb2R1Y2VyLCBwcm9kdWNlciwgcmVwZWF0LFxuICBldmVudHMsIHJlYWQsIHVuaW9uLFxuICBmbG93LCBnbywgaW50bywgd2FpdCwgcG9vbH1cbiJdLCJzb3VyY2VSb290IjoiIn0=
//# sourceURL=/Users/dyoder/repos/panda-river/src/adapters.coffee