"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pool = exports.wait = exports.into = exports.go = exports.flow = exports.union = exports.read = exports.events = exports.repeat = exports.producer = exports.isProducer = void 0;

var _pandaGenerics = require("panda-generics");

var _pandaGarden = require("panda-garden");

var _pandaParchment = require("panda-parchment");

var _iterator3 = require("./iterator");

var _reactor = require("./reactor");

var _reducers = require("./reducers");

function _asyncIterator(iterable) { var method; if (typeof Symbol === "function") { if (Symbol.asyncIterator) { method = iterable[Symbol.asyncIterator]; if (method != null) return method.call(iterable); } if (Symbol.iterator) { method = iterable[Symbol.iterator]; if (method != null) return method.call(iterable); } } throw new TypeError("Object is not async iterable"); }

function _awaitAsyncGenerator(value) { return new _AwaitValue(value); }

function _wrapAsyncGenerator(fn) { return function () { return new _AsyncGenerator(fn.apply(this, arguments)); }; }

function _AsyncGenerator(gen) { var front, back; function send(key, arg) { return new Promise(function (resolve, reject) { var request = { key: key, arg: arg, resolve: resolve, reject: reject, next: null }; if (back) { back = back.next = request; } else { front = back = request; resume(key, arg); } }); } function resume(key, arg) { try { var result = gen[key](arg); var value = result.value; var wrappedAwait = value instanceof _AwaitValue; Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) { if (wrappedAwait) { resume("next", arg); return; } settle(result.done ? "return" : "normal", arg); }, function (err) { resume("throw", err); }); } catch (err) { settle("throw", err); } } function settle(type, value) { switch (type) { case "return": front.resolve({ value: value, done: true }); break; case "throw": front.reject(value); break; default: front.resolve({ value: value, done: false }); break; } front = front.next; if (front) { resume(front.key, front.arg); } else { back = null; } } this._invoke = send; if (typeof gen.return !== "function") { this.return = undefined; } }

if (typeof Symbol === "function" && Symbol.asyncIterator) { _AsyncGenerator.prototype[Symbol.asyncIterator] = function () { return this; }; }

_AsyncGenerator.prototype.next = function (arg) { return this._invoke("next", arg); };

_AsyncGenerator.prototype.throw = function (arg) { return this._invoke("throw", arg); };

_AsyncGenerator.prototype.return = function (arg) { return this._invoke("return", arg); };

function _AwaitValue(value) { this.wrapped = value; }

var events, flow, go, into, isFunctionList, isProducer, pool, producer, queue, read, repeat, union, wait;
exports.wait = wait;
exports.union = union;
exports.repeat = repeat;
exports.read = read;
exports.producer = producer;
exports.pool = pool;
exports.isProducer = isProducer;
exports.into = into;
exports.go = go;
exports.flow = flow;
exports.events = events;

// isProducer
exports.isProducer = isProducer = function (x) {
  return (0, _iterator3.isIterator)(x) || (0, _reactor.isReactor)(x);
}; // producer


exports.producer = producer = _pandaGenerics.Method.create({
  description: "Attempts to turn its argument into an iterator or reactor."
});

_pandaGenerics.Method.define(producer, _iterator3.isIterable, function (x) {
  return (0, _iterator3.iterator)(x);
});

_pandaGenerics.Method.define(producer, _reactor.isReagent, function (x) {
  return (0, _reactor.reactor)(x);
});

_pandaGenerics.Method.define(producer, isProducer, _pandaGarden.identity); // repeat


exports.repeat = repeat = function* (x) {
  while (true) {
    yield x;
  }
}; // queue


queue = function () {
  var dq, p, q;
  q = [];
  p = [];
  return {
    enqueue: function (value) {
      var resolve;

      if (p.length > 0) {
        resolve = p.shift();
        return resolve(value);
      } else {
        return q.push(value);
      }
    },
    dequeue: dq = function () {
      if (q.length > 0) {
        return (0, _pandaParchment.follow)(q.shift());
      } else {
        return (0, _pandaParchment.promise)(function (resolve) {
          return p.push(resolve);
        });
      }
    },
    idle: function () {
      return p.length === 0 && q.length === 0;
    }
  };
}; // events


exports.events = events = (0, _pandaGarden.curry)(
/*#__PURE__*/
function () {
  var _ref = _wrapAsyncGenerator(function* (name, source) {
    var q, results;
    q = queue();

    if (source.on != null) {
      source.on(name, function (event) {
        return q.enqueue(event);
      });
    } else if (source.addEventListener != null) {
      source.addEventListener(name, function (event) {
        return q.enqueue(event);
      });
    } else {
      throw new TypeError("events: source must support `on` or `addEventListener` method");
    }

    results = [];

    while (true) {
      results.push((yield q.dequeue()));
    }

    return results;
  });

  return function (_x, _x2) {
    return _ref.apply(this, arguments);
  };
}()); // read

exports.read = read =
/*#__PURE__*/
function () {
  var _ref2 = _wrapAsyncGenerator(function* (s) {
    var data, end, q, results;
    q = queue();
    end = false;
    s.on("data", function (data) {
      return q.enqueue(data);
    });
    s.on("error", function (error) {
      return q.enqueue((0, _pandaParchment.reject)(error));
    });
    s.on("end", function () {
      end = true;
      return q.enqueue(void 0);
    });
    results = [];

    while (true) {
      data = yield _awaitAsyncGenerator(q.dequeue());

      if (end) {
        break;
      } else {
        results.push((yield data));
      }
    }

    return results;
  });

  return function read(_x3) {
    return _ref2.apply(this, arguments);
  };
}(); // union


exports.union = union =
/*#__PURE__*/
function () {
  var _ref3 = _wrapAsyncGenerator(function* (...px) {
    var done, i, len, p, q, results;
    q = queue();
    done = 0;

    for (i = 0, len = px.length; i < len; i++) {
      p = px[i];

      (async function (p) {
        var x;
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;

        var _iteratorError;

        try {
          for (var _iterator = _asyncIterator(p), _step, _value; _step = await _iterator.next(), _iteratorNormalCompletion = _step.done, _value = await _step.value, !_iteratorNormalCompletion; _iteratorNormalCompletion = true) {
            x = _value;
            q.enqueue(x);
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return != null) {
              await _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        return done++;
      })(p);
    }

    while (true) {
      yield q.dequeue();

      if (done === px.length) {
        break;
      }
    }

    results = [];

    while (!q.idle()) {
      results.push((yield q.dequeue()));
    }

    return results;
  });

  return function union() {
    return _ref3.apply(this, arguments);
  };
}(); // flow


isFunctionList = function (...fx) {
  var f, i, len;

  for (i = 0, len = fx.length; i < len; i++) {
    f = fx[i];

    if (!(0, _pandaParchment.isFunction)(f)) {
      return false;
    }
  }

  return true;
};

exports.flow = flow = _pandaGenerics.Method.create({
  description: "Compose functions and a producer."
}); // check for promise

_pandaGenerics.Method.define(flow, _pandaParchment.isDefined, _pandaParchment.isArray, function (x, ax) {
  return flow(x, ...ax);
});

_pandaGenerics.Method.define(flow, _pandaParchment.isDefined, isFunctionList, function (x, ...fx) {
  return flow(x, (0, _pandaGarden.pipe)(...fx));
});

_pandaGenerics.Method.define(flow, _pandaParchment.isDefined, _pandaParchment.isFunction, function (x, f) {
  return flow(producer(x), f);
});

_pandaGenerics.Method.define(flow, _pandaParchment.isPromise, _pandaParchment.isFunction, async function (x, f) {
  return flow((await x), f);
});

_pandaGenerics.Method.define(flow, isProducer, _pandaParchment.isFunction, function (p, f) {
  return f(p);
});

_pandaGenerics.Method.define(flow, _pandaParchment.isArray, function (ax) {
  return flow(...ax);
});

exports.go = go = (0, _pandaGarden.compose)(_reducers.start, flow);
exports.into = into = (0, _pandaGarden.curry)((0, _pandaGarden.binary)((0, _pandaGarden.flip)(go)));
exports.wait = wait = (0, _pandaGarden.curry)(
/*#__PURE__*/
function () {
  var _ref4 = _wrapAsyncGenerator(function* (filter, producer) {
    var ref, results, x;
    ref = filter(producer);
    results = [];
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;

    var _iteratorError2;

    try {
      for (var _iterator2 = _asyncIterator(ref), _step2, _value2; _step2 = yield _awaitAsyncGenerator(_iterator2.next()), _iteratorNormalCompletion2 = _step2.done, _value2 = yield _awaitAsyncGenerator(_step2.value), !_iteratorNormalCompletion2; _iteratorNormalCompletion2 = true) {
        x = _value2;
        results.push((yield x));
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          yield _awaitAsyncGenerator(_iterator2.return());
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }

    return results;
  });

  return function (_x4, _x5) {
    return _ref4.apply(this, arguments);
  };
}());
exports.pool = pool = (0, _pandaGarden.curry)(
/*#__PURE__*/
function () {
  var _ref5 = _wrapAsyncGenerator(function* (filter, producer) {
    var i, len, ref, results, x;
    ref = yield _awaitAsyncGenerator((0, _pandaParchment.all)((0, _reducers.collect)(filter(producer))));
    results = [];

    for (i = 0, len = ref.length; i < len; i++) {
      x = ref[i];
      results.push((yield x));
    }

    return results;
  });

  return function (_x6, _x7) {
    return _ref5.apply(this, arguments);
  };
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtcml2ZXIvc3JjL2FkYXB0ZXJzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUEEsSUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsY0FBQSxFQUFBLFVBQUEsRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBOzs7Ozs7Ozs7Ozs7OztBQVdBLHFCQUFBLFVBQUEsR0FBYSxVQUFBLENBQUEsRUFBQTtTQUFRLDJCQUFELENBQUMsQ0FBRCxJQUFtQix3QkFBRCxDQUFDLEM7QUFYdkMsQ0FXQSxDOzs7QUFJQSxtQkFBQSxRQUFBLEdBQVcsc0JBQUEsTUFBQSxDQUNUO0FBQUEsRUFBQSxXQUFBLEVBQWE7QUFBYixDQURTLENBQVg7O0FBR0Esc0JBQUEsTUFBQSxDQUFBLFFBQUEsRUFBQSxxQkFBQSxFQUFvQyxVQUFBLENBQUEsRUFBQTtTQUFPLHlCQUFBLENBQUEsQztBQUEzQyxDQUFBOztBQUNBLHNCQUFBLE1BQUEsQ0FBQSxRQUFBLEVBQUEsa0JBQUEsRUFBbUMsVUFBQSxDQUFBLEVBQUE7U0FBTyxzQkFBQSxDQUFBLEM7QUFBMUMsQ0FBQTs7QUFDQSxzQkFBQSxNQUFBLENBQUEsUUFBQSxFQUFBLFVBQUEsRUFwQkEscUJBb0JBLEU7OztBQUlBLGlCQUFBLE1BQUEsR0FBUyxXQUFBLENBQUEsRUFBQTtBQUFPLFNBQUEsSUFBQSxFQUFBO0FBQUssVUFBTSxDQUFOO0FBQUw7QUF4QmhCLENBd0JBLEM7OztBQUlBLEtBQUEsR0FBUSxZQUFBO0FBQ04sTUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUE7QUFBQSxFQUFBLENBQUEsR0FBSSxFQUFKO0FBQ0EsRUFBQSxDQUFBLEdBQUksRUFB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ZnJvbSBcInBhbmRhLWdlbmVyaWNzXCJcbmltcG9ydCB7aWRlbnRpdHksIGN1cnJ5LCBiaW5hcnksIGNvbXBvc2UsIHBpcGUsIGZsaXB9IGZyb20gXCJwYW5kYS1nYXJkZW5cIlxuaW1wb3J0IHtwcm9taXNlLCBmb2xsb3csIHJlamVjdCwgYWxsLFxuICBpc0RlZmluZWQsIGlzQXJyYXksIGlzRnVuY3Rpb24sIGlzUHJvbWlzZX0gZnJvbSBcInBhbmRhLXBhcmNobWVudFwiXG5cbmltcG9ydCB7aXNJdGVyYWJsZSwgaXNJdGVyYXRvciwgaXRlcmF0b3J9IGZyb20gXCIuL2l0ZXJhdG9yXCJcbmltcG9ydCB7aXNSZWFnZW50LCBpc1JlYWN0b3IsIHJlYWN0b3J9IGZyb20gXCIuL3JlYWN0b3JcIlxuaW1wb3J0IHtzdGFydCwgY29sbGVjdH0gZnJvbSBcIi4vcmVkdWNlcnNcIlxuXG4jIGlzUHJvZHVjZXJcblxuaXNQcm9kdWNlciA9ICh4KSAtPiAoaXNJdGVyYXRvciB4KSB8fCAoaXNSZWFjdG9yIHgpXG5cbiMgcHJvZHVjZXJcblxucHJvZHVjZXIgPSBNZXRob2QuY3JlYXRlXG4gIGRlc2NyaXB0aW9uOiBcIkF0dGVtcHRzIHRvIHR1cm4gaXRzIGFyZ3VtZW50IGludG8gYW4gaXRlcmF0b3Igb3IgcmVhY3Rvci5cIlxuXG5NZXRob2QuZGVmaW5lIHByb2R1Y2VyLCBpc0l0ZXJhYmxlLCAoeCkgLT4gaXRlcmF0b3IgeFxuTWV0aG9kLmRlZmluZSBwcm9kdWNlciwgaXNSZWFnZW50LCAoeCkgLT4gcmVhY3RvciB4XG5NZXRob2QuZGVmaW5lIHByb2R1Y2VyLCBpc1Byb2R1Y2VyLCBpZGVudGl0eVxuXG4jIHJlcGVhdFxuXG5yZXBlYXQgPSAoeCkgLT4gbG9vcCB5aWVsZCB4IDsgcmV0dXJuXG5cbiMgcXVldWVcblxucXVldWUgPSAtPlxuICBxID0gW11cbiAgcCA9IFtdXG4gIGVucXVldWU6ICh2YWx1ZSkgLT5cbiAgICBpZiBwLmxlbmd0aCA+IDBcbiAgICAgIHJlc29sdmUgPSBwLnNoaWZ0KClcbiAgICAgIHJlc29sdmUgdmFsdWVcbiAgICBlbHNlXG4gICAgICBxLnB1c2ggdmFsdWVcbiAgZGVxdWV1ZTogZHEgPSAtPlxuICAgIGlmIHEubGVuZ3RoID4gMFxuICAgICAgZm9sbG93IHEuc2hpZnQoKVxuICAgIGVsc2VcbiAgICAgIHByb21pc2UgKHJlc29sdmUpIC0+IHAucHVzaCByZXNvbHZlXG4gIGlkbGU6IC0+IHAubGVuZ3RoID09IDAgJiYgcS5sZW5ndGggPT0gMFxuXG4jIGV2ZW50c1xuXG5ldmVudHMgPSBjdXJyeSAobmFtZSwgc291cmNlKSAtPlxuICBxID0gcXVldWUoKVxuICBpZiBzb3VyY2Uub24/XG4gICAgc291cmNlLm9uIG5hbWUsIChldmVudCkgLT4gcS5lbnF1ZXVlIGV2ZW50XG4gIGVsc2UgaWYgc291cmNlLmFkZEV2ZW50TGlzdGVuZXI/XG4gICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIgbmFtZSwgKGV2ZW50KSAtPiBxLmVucXVldWUgZXZlbnRcbiAgZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yIFwiZXZlbnRzOiBzb3VyY2UgbXVzdCBzdXBwb3J0XG4gICAgYG9uYCBvciBgYWRkRXZlbnRMaXN0ZW5lcmAgbWV0aG9kXCJcbiAgbG9vcCB5aWVsZCBhd2FpdCBxLmRlcXVldWUoKVxuXG4jIHJlYWRcblxucmVhZCA9IChzKSAtPlxuICBxID0gcXVldWUoKVxuICBlbmQgPSBmYWxzZVxuICBzLm9uIFwiZGF0YVwiLCAoZGF0YSkgLT4gcS5lbnF1ZXVlIGRhdGFcbiAgcy5vbiBcImVycm9yXCIsIChlcnJvcikgLT4gcS5lbnF1ZXVlIHJlamVjdCBlcnJvclxuICBzLm9uIFwiZW5kXCIsIC0+XG4gICAgZW5kID0gdHJ1ZVxuICAgIHEuZW5xdWV1ZSB1bmRlZmluZWRcblxuICBsb29wXG4gICAgZGF0YSA9IGF3YWl0IHEuZGVxdWV1ZSgpXG4gICAgaWYgZW5kIHRoZW4gYnJlYWsgZWxzZSB5aWVsZCBkYXRhXG5cbiMgdW5pb25cblxudW5pb24gPSAocHguLi4pIC0+XG4gIHEgPSBxdWV1ZSgpXG4gIGRvbmUgPSAwXG4gIGZvciBwIGluIHB4XG4gICAgZG8gKHApIC0+XG4gICAgICBxLmVucXVldWUgeCBmb3IgYXdhaXQgeCBmcm9tIHBcbiAgICAgIGRvbmUrK1xuICBsb29wXG4gICAgeWllbGQgYXdhaXQgcS5kZXF1ZXVlKClcbiAgICBicmVhayBpZiBkb25lID09IHB4Lmxlbmd0aFxuICB5aWVsZCBhd2FpdCBxLmRlcXVldWUoKSB1bnRpbCBxLmlkbGUoKVxuXG4jIGZsb3dcblxuaXNGdW5jdGlvbkxpc3QgPSAoZnguLi4pIC0+XG4gIHJldHVybiBmYWxzZSBmb3IgZiBpbiBmeCB3aGVuICFpc0Z1bmN0aW9uIGZcbiAgdHJ1ZVxuXG5mbG93ID0gTWV0aG9kLmNyZWF0ZVxuICBkZXNjcmlwdGlvbjogXCJDb21wb3NlIGZ1bmN0aW9ucyBhbmQgYSBwcm9kdWNlci5cIlxuXG4jIGNoZWNrIGZvciBwcm9taXNlXG5cbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNEZWZpbmVkLCBpc0FycmF5LCAoeCwgYXgpIC0+IGZsb3cgeCwgYXguLi5cbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uTGlzdCwgKHgsIGZ4Li4uKSAtPiBmbG93IHgsIHBpcGUgZnguLi5cbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCAoeCwgZikgLT4gZmxvdyAocHJvZHVjZXIgeCksIGZcbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNQcm9taXNlLCBpc0Z1bmN0aW9uLCAoeCwgZikgLT4gZmxvdyAoYXdhaXQgeCksIGZcbk1ldGhvZC5kZWZpbmUgZmxvdywgaXNQcm9kdWNlciwgaXNGdW5jdGlvbiwgKHAsIGYpIC0+IGYgcFxuTWV0aG9kLmRlZmluZSBmbG93LCBpc0FycmF5LCAoYXgpIC0+IGZsb3cgYXguLi5cblxuZ28gPSBjb21wb3NlIHN0YXJ0LCBmbG93XG5cbmludG8gPSBjdXJyeSBiaW5hcnkgZmxpcCBnb1xuXG53YWl0ID0gY3VycnkgKGZpbHRlciwgcHJvZHVjZXIpIC0+XG4gIHlpZWxkIGF3YWl0IHggZm9yIGF3YWl0IHggZnJvbSBmaWx0ZXIgcHJvZHVjZXJcblxucG9vbCA9IGN1cnJ5IChmaWx0ZXIsIHByb2R1Y2VyKSAtPlxuICB5aWVsZCB4IGZvciB4IGluIGF3YWl0IGFsbCBjb2xsZWN0IGZpbHRlciBwcm9kdWNlclxuXG5leHBvcnQge2lzUHJvZHVjZXIsIHByb2R1Y2VyLCByZXBlYXQsXG4gIGV2ZW50cywgcmVhZCwgdW5pb24sXG4gIGZsb3csIGdvLCBpbnRvLCB3YWl0LCBwb29sfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/dyoder/repos/panda-river/src/adapters.coffee