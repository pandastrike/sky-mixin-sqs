"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.tools = void 0;

var _pandaRiver = require("panda-river");

var _pandaParchment = require("panda-parchment");

var _pandaQuill = require("panda-quill");

var _helpers = require("./helpers");

var _plugins = require("./plugins");

var _sh = require("./sh");

var tools;
exports.tools = tools;

exports.tools = tools = function (p9k) {
  var compile, cwd, define, extension, glob, read, run, target, targets, tasks, write;
  ({
    define,
    run,
    glob,
    read,
    write,
    extension
  } = p9k);
  cwd = process.cwd(); // Compile helper, taking target configuration
  // (target in configuration refers to output path)

  compile = function ({
    source,
    target,
    settings
  }) {
    return function () {
      return (0, _pandaRiver.go)([glob(source, cwd), (0, _pandaRiver.wait)((0, _pandaRiver.map)(read)), (0, _pandaRiver.map)((0, _plugins.coffee)(settings)), (0, _pandaRiver.map)(extension(".js")), (0, _pandaRiver.wait)((0, _pandaRiver.map)(write(target)))]);
    };
  };

  targets = {
    active: [],
    preset: {
      npm: function () {
        var settings;
        define("npm:clean", function () {
          return (0, _pandaQuill.rmr)("build/npm");
        }); // override defaults to support AWS Lambda

        settings = {
          transpile: {
            presets: [[(0, _helpers.resolve)("@babel/preset-env"), {
              targets: {
                node: "8.10"
              }
            }]]
          }
        };
        define("npm:compile:source", compile({
          source: "src/**/*.coffee",
          target: "build/npm",
          settings: settings
        }));
        define("npm:compile:tests", compile({
          source: "test/**/*.coffee",
          target: "build/npm",
          settings: settings
        }));
        define("npm:build", "npm:clean npm:compile:source& npm:compile:tests&");
        define("npm:run:tests", async function () {
          return (0, _sh.print)((await (0, _sh.sh)("node build/npm/test/index.js")));
        });
        define("npm:test", "npm:build npm:run:tests");
        return define("npm:publish", async function () {
          return (0, _sh.print)((await (0, _sh.sh)("npm publish")));
        });
      },
      web: function () {
        var settings;
        define("web:clean", function () {
          return (0, _pandaQuill.rmr)("build/web");
        }); // get all the latest

        settings = {
          transpile: {
            presets: [[(0, _helpers.resolve)("@babel/preset-env"), {
              targets: "last 2 chrome versions",
              modules: false
            }]]
          }
        };
        define("web:compile:source", compile({
          source: "src/**/*.coffee",
          target: "build/web",
          settings: settings
        }));
        define("web:compile:tests", compile({
          source: "test/**/*.coffee",
          target: "build/web",
          settings: settings
        }));
        define("web:build", "web:clean web:compile:source& web:compile:tests&");
        define("web:run:tests", async function () {
          // TODO: probably should run in headless browser
          return (0, _sh.print)((await (0, _sh.sh)("node build/web/test/index.js")));
        });
        define("web:test", "web:build web:run:tests");
        return define("web:publish", async function () {
          (0, _pandaQuill.write)("build/web/package.json", (0, _helpers.replace)([[_helpers.module.name, _helpers.module.name + "-esm"], ["build/npm", "."]], (0, _helpers.json)(_helpers.module)));
          return (0, _sh.print)((await (0, _sh.sh)("cd build/web && npm publish")));
        });
      }
    }
  }; // Tag a release

  define("git:tag", async function () {
    var version;
    ({
      version
    } = _helpers.module);
    await (0, _sh.sh)(`git tag -am ${version} ${version}`);
    return await (0, _sh.sh)("git push --tags");
  });
  define("clean", function () {
    return (0, _pandaQuill.rmr)("build");
  }); // define dyamically because active targets isn't yet defined

  tasks = function (task) {
    return function () {
      var i, len, name, ref, results;
      ref = targets.active;
      results = [];

      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        results.push(run(`${name}:${task}`));
      }

      return results;
    };
  };

  define("build", tasks("build"));
  define("test", tasks("test"));
  define("publish", tasks("publish")); // if name references a preset, run the preset with
  // the definition as an arg. otw, the arg is a fn
  // defining the tasks under target name

  target = function (name, definition) {
    var f;
    targets.active.push(name);

    if ((f = targets.preset[name]) != null) {
      return f(definition);
    } else {
      return definition();
    }
  };

  return {
    target
  };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9keW9kZXIvcmVwb3MvcGFuZGEtYnVpbGRlci9zcmMvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFOQSxJQUFBLEtBQUE7OztBQVFBLGdCQUFBLEtBQUEsR0FBUSxVQUFBLEdBQUEsRUFBQTtBQUVOLE1BQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUE7QUFBQSxHQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxHQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQTtBQUFBLE1BQUEsR0FBQTtBQUVBLEVBQUEsR0FBQSxHQUFNLE9BQU8sQ0FGYixHQUVNLEVBQU4sQ0FKTSxDOzs7QUFRTixFQUFBLE9BQUEsR0FBVSxVQUFDO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUQsSUFBQTtBQUFDLEdBQUQsRUFBQTtXQUNSLFlBQUE7YUFDRSxvQkFBRyxDQUNELElBQUEsQ0FBQSxNQUFBLEVBREMsR0FDRCxDQURDLEVBRUQsc0JBQUsscUJBRkosSUFFSSxDQUFMLENBRkMsRUFHRCxxQkFBSSxxQkFISCxRQUdHLENBQUosQ0FIQyxFQUlELHFCQUFJLFNBQUEsQ0FKSCxLQUlHLENBQUosQ0FKQyxFQUtELHNCQUFLLHFCQUFJLEtBQUEsQ0FMWCxNQUtXLENBQUosQ0FBTCxDQUxDLENBQUgsQztBQURGLEs7QUFEUSxHQUFWOztBQVVBLEVBQUEsT0FBQSxHQUVFO0FBQUEsSUFBQSxNQUFBLEVBQUEsRUFBQTtBQUVBLElBQUEsTUFBQSxFQUVFO0FBQUEsTUFBQSxHQUFBLEVBQUssWUFBQTtBQUVILFlBQUEsUUFBQTtBQUFBLFFBQUEsTUFBQSxD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QUNFLEM7QUFERixLQUFBLE1BQUE7YUFHRSxVQUhGLEU7O0FBRk8sR0FBVDs7U0FPQTtBQUFBLElBQUE7QUFBQSxHO0FBaElNLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3N0YXJ0LCBnbywgbWFwLCB3YWl0LCB0ZWUsIHBvb2x9IGZyb20gXCJwYW5kYS1yaXZlclwiXG5pbXBvcnQge2FsbH0gZnJvbSBcInBhbmRhLXBhcmNobWVudFwiXG5pbXBvcnQge3dyaXRlIGFzIF93cml0ZSwgZXhpc3RzLFxuICBpc0RpcmVjdG9yeSwgaXNGaWxlLCBscywgcm0sIHJtcn0gZnJvbSBcInBhbmRhLXF1aWxsXCJcbmltcG9ydCB7bW9kdWxlLCByZXNvbHZlLCBqc29uLCByZXBsYWNlfSBmcm9tIFwiLi9oZWxwZXJzXCJcbmltcG9ydCB7Y29mZmVlfSBmcm9tIFwiLi9wbHVnaW5zXCJcbmltcG9ydCB7cHJpbnQsIHNofSBmcm9tIFwiLi9zaFwiXG5cbnRvb2xzID0gKHA5aykgLT5cblxuICB7ZGVmaW5lLCBydW4sIGdsb2IsIHJlYWQsIHdyaXRlLCBleHRlbnNpb259ID0gcDlrXG5cbiAgY3dkID0gcHJvY2Vzcy5jd2QoKVxuXG4gICMgQ29tcGlsZSBoZWxwZXIsIHRha2luZyB0YXJnZXQgY29uZmlndXJhdGlvblxuICAjICh0YXJnZXQgaW4gY29uZmlndXJhdGlvbiByZWZlcnMgdG8gb3V0cHV0IHBhdGgpXG4gIGNvbXBpbGUgPSAoe3NvdXJjZSwgdGFyZ2V0LCBzZXR0aW5nc30pIC0+XG4gICAgLT5cbiAgICAgIGdvIFtcbiAgICAgICAgZ2xvYiBzb3VyY2UsIGN3ZFxuICAgICAgICB3YWl0IG1hcCByZWFkXG4gICAgICAgIG1hcCBjb2ZmZWUgc2V0dGluZ3NcbiAgICAgICAgbWFwIGV4dGVuc2lvbiBcIi5qc1wiXG4gICAgICAgIHdhaXQgbWFwIHdyaXRlIHRhcmdldFxuICAgICAgXVxuXG4gIHRhcmdldHMgPVxuXG4gICAgYWN0aXZlOiBbXVxuXG4gICAgcHJlc2V0OlxuXG4gICAgICBucG06IC0+XG5cbiAgICAgICAgZGVmaW5lIFwibnBtOmNsZWFuXCIsIC0+IHJtciBcImJ1aWxkL25wbVwiXG5cbiAgICAgICAgIyBvdmVycmlkZSBkZWZhdWx0cyB0byBzdXBwb3J0IEFXUyBMYW1iZGFcbiAgICAgICAgc2V0dGluZ3MgPVxuICAgICAgICAgIHRyYW5zcGlsZTpcbiAgICAgICAgICAgIHByZXNldHM6IFtbXG4gICAgICAgICAgICAgIHJlc29sdmUgXCJAYmFiZWwvcHJlc2V0LWVudlwiXG4gICAgICAgICAgICAgIHRhcmdldHM6IG5vZGU6IFwiOC4xMFwiXG4gICAgICAgICAgICBdXVxuXG4gICAgICAgIGRlZmluZSBcIm5wbTpjb21waWxlOnNvdXJjZVwiLFxuICAgICAgICAgIGNvbXBpbGVcbiAgICAgICAgICAgIHNvdXJjZTogXCJzcmMvKiovKi5jb2ZmZWVcIlxuICAgICAgICAgICAgdGFyZ2V0OiBcImJ1aWxkL25wbVwiXG4gICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NcblxuICAgICAgICBkZWZpbmUgXCJucG06Y29tcGlsZTp0ZXN0c1wiLFxuICAgICAgICAgIGNvbXBpbGVcbiAgICAgICAgICAgIHNvdXJjZTogXCJ0ZXN0LyoqLyouY29mZmVlXCJcbiAgICAgICAgICAgIHRhcmdldDogXCJidWlsZC9ucG1cIlxuICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzXG5cbiAgICAgICAgZGVmaW5lIFwibnBtOmJ1aWxkXCIsIFwibnBtOmNsZWFuIG5wbTpjb21waWxlOnNvdXJjZSYgbnBtOmNvbXBpbGU6dGVzdHMmXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06cnVuOnRlc3RzXCIsIC0+XG4gICAgICAgICAgcHJpbnQgYXdhaXQgc2ggXCJub2RlIGJ1aWxkL25wbS90ZXN0L2luZGV4LmpzXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06dGVzdFwiLCBcIm5wbTpidWlsZCBucG06cnVuOnRlc3RzXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06cHVibGlzaFwiLCAtPiBwcmludCBhd2FpdCBzaCBcIm5wbSBwdWJsaXNoXCJcblxuICAgICAgd2ViOiAtPlxuXG4gICAgICAgIGRlZmluZSBcIndlYjpjbGVhblwiLCAtPiBybXIgXCJidWlsZC93ZWJcIlxuXG4gICAgICAgICMgZ2V0IGFsbCB0aGUgbGF0ZXN0XG4gICAgICAgIHNldHRpbmdzID1cbiAgICAgICAgICB0cmFuc3BpbGU6XG4gICAgICAgICAgICBwcmVzZXRzOiBbW1xuICAgICAgICAgICAgICByZXNvbHZlIFwiQGJhYmVsL3ByZXNldC1lbnZcIlxuICAgICAgICAgICAgICB0YXJnZXRzOiBcImxhc3QgMiBjaHJvbWUgdmVyc2lvbnNcIlxuICAgICAgICAgICAgICBtb2R1bGVzOiBmYWxzZVxuICAgICAgICAgICAgXV1cblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6Y29tcGlsZTpzb3VyY2VcIixcbiAgICAgICAgICBjb21waWxlXG4gICAgICAgICAgICBzb3VyY2U6IFwic3JjLyoqLyouY29mZmVlXCJcbiAgICAgICAgICAgIHRhcmdldDogXCJidWlsZC93ZWJcIlxuICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzXG5cbiAgICAgICAgZGVmaW5lIFwid2ViOmNvbXBpbGU6dGVzdHNcIixcbiAgICAgICAgICBjb21waWxlXG4gICAgICAgICAgICBzb3VyY2U6IFwidGVzdC8qKi8qLmNvZmZlZVwiXG4gICAgICAgICAgICB0YXJnZXQ6IFwiYnVpbGQvd2ViXCJcbiAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5nc1xuXG4gICAgICAgIGRlZmluZSBcIndlYjpidWlsZFwiLCBcIndlYjpjbGVhbiB3ZWI6Y29tcGlsZTpzb3VyY2UmIHdlYjpjb21waWxlOnRlc3RzJlwiXG5cbiAgICAgICAgZGVmaW5lIFwid2ViOnJ1bjp0ZXN0c1wiLCAtPlxuICAgICAgICAgICMgVE9ETzogcHJvYmFibHkgc2hvdWxkIHJ1biBpbiBoZWFkbGVzcyBicm93c2VyXG4gICAgICAgICAgcHJpbnQgYXdhaXQgc2ggXCJub2RlIGJ1aWxkL3dlYi90ZXN0L2luZGV4LmpzXCJcblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6dGVzdFwiLCBcIndlYjpidWlsZCB3ZWI6cnVuOnRlc3RzXCJcblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6cHVibGlzaFwiLCAtPlxuICAgICAgICAgIF93cml0ZSBcImJ1aWxkL3dlYi9wYWNrYWdlLmpzb25cIixcbiAgICAgICAgICAgIChyZXBsYWNlIFtcbiAgICAgICAgICAgICAgWyBtb2R1bGUubmFtZSwgbW9kdWxlLm5hbWUgKyBcIi1lc21cIiBdXG4gICAgICAgICAgICAgIFsgXCJidWlsZC9ucG1cIiwgXCIuXCIgXVxuICAgICAgICAgICAgXSwgKGpzb24gbW9kdWxlKSlcbiAgICAgICAgICBwcmludCBhd2FpdCBzaCBcImNkIGJ1aWxkL3dlYiAmJiBucG0gcHVibGlzaFwiXG5cblxuICAjIFRhZyBhIHJlbGVhc2VcbiAgZGVmaW5lIFwiZ2l0OnRhZ1wiLCAtPlxuICAgIHt2ZXJzaW9ufSA9IG1vZHVsZVxuICAgIGF3YWl0IHNoIFwiZ2l0IHRhZyAtYW0gI3t2ZXJzaW9ufSAje3ZlcnNpb259XCJcbiAgICBhd2FpdCBzaCBcImdpdCBwdXNoIC0tdGFnc1wiXG5cbiAgZGVmaW5lIFwiY2xlYW5cIiwgLT4gcm1yIFwiYnVpbGRcIlxuXG4gICMgZGVmaW5lIGR5YW1pY2FsbHkgYmVjYXVzZSBhY3RpdmUgdGFyZ2V0cyBpc24ndCB5ZXQgZGVmaW5lZFxuXG4gIHRhc2tzID0gKHRhc2spIC0+XG4gICAgLT4gcnVuIFwiI3tuYW1lfToje3Rhc2t9XCIgZm9yIG5hbWUgaW4gdGFyZ2V0cy5hY3RpdmVcblxuICBkZWZpbmUgXCJidWlsZFwiLCB0YXNrcyBcImJ1aWxkXCJcblxuICBkZWZpbmUgXCJ0ZXN0XCIsIHRhc2tzIFwidGVzdFwiXG5cbiAgZGVmaW5lIFwicHVibGlzaFwiLCB0YXNrcyBcInB1Ymxpc2hcIlxuXG4gICMgaWYgbmFtZSByZWZlcmVuY2VzIGEgcHJlc2V0LCBydW4gdGhlIHByZXNldCB3aXRoXG4gICMgdGhlIGRlZmluaXRpb24gYXMgYW4gYXJnLiBvdHcsIHRoZSBhcmcgaXMgYSBmblxuICAjIGRlZmluaW5nIHRoZSB0YXNrcyB1bmRlciB0YXJnZXQgbmFtZVxuICB0YXJnZXQgPSAobmFtZSwgZGVmaW5pdGlvbikgLT5cbiAgICB0YXJnZXRzLmFjdGl2ZS5wdXNoIG5hbWVcbiAgICBpZiAoZiA9IHRhcmdldHMucHJlc2V0W25hbWVdKT9cbiAgICAgIGYgZGVmaW5pdGlvblxuICAgIGVsc2VcbiAgICAgIGRlZmluaXRpb24oKVxuXG4gIHt0YXJnZXR9XG5cbmV4cG9ydCB7dG9vbHN9XG4iXSwic291cmNlUm9vdCI6IiJ9
//# sourceURL=/Users/dyoder/repos/panda-builder/src/index.coffee