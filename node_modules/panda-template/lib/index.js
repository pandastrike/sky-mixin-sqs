"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _fairmont = require("fairmont");

var _sprintfJs = require("sprintf-js");

var _sprintfJs2 = _interopRequireDefault(_sprintfJs);

var _handlebars = require("handlebars");

var _handlebars2 = _interopRequireDefault(_handlebars);

var _swag = require("swag");

var _swag2 = _interopRequireDefault(_swag);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Generated by CoffeeScript 2.0.2
var PandaTemplate,
    block,
    join,
    slice = [].slice;

_swag2.default.registerHelpers(_handlebars2.default);

join = function (d, array) {
  return array.join(d);
};

block = function (f) {
  return function (...args) {
    var j, options, ref;
    ref = args, args = 2 <= ref.length ? slice.call(ref, 0, j = ref.length - 1) : (j = 0, []), options = ref[j++];
    if (options.fn != null) {
      return join("", f(...args, options.fn));
    } else {
      return f(...args, _fairmont.identity);
    }
  };
};

_handlebars2.default.registerHelper({
  let: function (...args) {
    var j, options, ref;
    ref = args, args = 2 <= ref.length ? slice.call(ref, 0, j = ref.length - 1) : (j = 0, []), options = ref[j++];
    return options.fn(this, {
      data: options.data,
      blockParams: args
    });
  },
  values: block(function (object, f) {
    var key, results, value;
    results = [];
    for (key in object) {
      value = object[key];
      results.push(f(value));
    }
    return results;
  }),
  filter: block(function (property, value, objects, f) {
    var j, len, object, results;
    results = [];
    for (j = 0, len = objects.length; j < len; j++) {
      object = objects[j];
      if (object[property] === value) {
        results.push(f(object));
      }
    }
    return results;
  }),
  pluck: block(function (property, objects, f) {
    var j, len, object, results;
    results = [];
    for (j = 0, len = objects.length; j < len; j++) {
      object = objects[j];
      results.push(f(object[property]));
    }
    return results;
  }),
  join: block(function (delimiter, array, f) {
    return [join(delimiter, array.map(f))];
  }),
  sprintf: function (format, string) {
    return (0, _sprintfJs2.default)(format, string);
  },
  indent: function (n, string) {
    var indent;
    indent = " ".repeat(n);
    return string.replace(/\n/g, `\n${indent}`);
  },
  hang: function () {
    var indent;
    indent = function (x, s) {
      return " ".repeat(x) + s;
    };
    return function (i, w, s) {
      var first, line, m, rest;
      m = w - i;
      [first, ...rest] = s.match(RegExp(`.{1,${m}}(\\s+|$)`, "g"));
      return [first, ...function () {
        var j, len, results;
        results = [];
        for (j = 0, len = rest.length; j < len; j++) {
          line = rest[j];
          results.push(indent(i, line));
        }
        return results;
      }()].join("\n");
    };
  }(),
  json: function (value) {
    return JSON.stringify(value, null, 2);
  },
  match: block(function (re, s, f) {
    var j, k, len, results, v;
    if (k = s.match(new RegExp(re, "g"))) {
      results = [];
      for (j = 0, len = k.length; j < len; j++) {
        v = k[j];
        results.push(f(v));
      }
      return results;
    } else {
      return [];
    }
  }),
  replace: function (re, r, s) {
    return s.replace(new RegExp(re, "g"), r);
  },
  pick: function (...args) {
    return args.find(_fairmont.isDefined);
  },
  parsePath: block(function (s, f) {
    var j, len, p, ref, results;
    ref = ["/", ...s.split("/").slice(1)];
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      p = ref[j];
      results.push(f(p));
    }
    return results;
  })
});

PandaTemplate = class PandaTemplate {
  constructor() {
    this.H = _handlebars2.default;
  }

  render(template, context) {
    return this.H.compile(template, {
      noEscape: true
    })(context);
  }

  registerPartial(name, template) {
    return this.H.registerPartial(name, template);
  }

  handlebars() {
    return this.H;
  }

};

exports.default = PandaTemplate;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbInNyYy9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsQUFBUSxBQUFNLEFBQVc7O0FBQ3pCLEFBQU87Ozs7QUFDUCxBQUFPOzs7O0FBQ1AsQUFBTzs7Ozs7OztBQUhQLElBQUE7SUFBQTtJQUFBO0lBQUE7O0FBS0EsQUFBQyxlQUFELEFBQUUsQUFBZ0I7O0FBQ2xCLE9BQU8sVUFBQSxBQUFDLEdBQUQsQUFBSTtTQUFVLEFBQUssTUFBTCxBQUFNLEtBQXBCLEFBQWMsQUFBVzs7O0FBRWhDLFFBQVEsVUFBQSxBQUFDO1NBQ1AsVUFBQSxHQUFBLEFBQUMsTUFDQztRQUFBLEdBQUEsU0FBQTsrRkFEUTtBQUNSLFFBQUcsY0FBSDthQUNFLEtBQUEsQUFBSyxJQUFJLEVBQUUsR0FBRixBQUFFLE1BQVMsQUFBTyxRQUQ3QixBQUNFLEFBQVMsQUFBbUI7QUFEOUIsV0FBQTthQUdFLEVBQUUsR0FISixBQUdFLEFBQUUsQUFBUztBQUpmO0FBRE07OztBQU9SLEFBQUMscUJBQUQsQUFBRTtBQUVBLE9BQUssVUFBQSxHQUFBLEFBQUMsTUFDSjtRQUFBLEdBQUEsU0FBQTsrRkFEYTttQkFDYixBQUFRLEdBQVIsQUFBVztBQUFNLFlBQU0sQUFBTyxRQUFiLEFBQWM7QUFBTSxtQkFEbEMsQUFDSCxBQUFpQixBQUFpQztBQUFqQyxLQUFqQixBQUFPO0FBRFQ7QUFHQSxnQkFBYyxVQUFBLEFBQUMsUUFBRCxBQUFTLEdBQU07UUFBQSxLQUFBLFNBQUE7O0FBQUEsU0FBQSxPQUFBOzttQkFBQSxFQUFBLEFBQUU7QUFBRjtXQUFmO0FBSGQsQUFHUSxHQUFBO0FBRVIsZ0JBQWMsVUFBQSxBQUFDLFVBQUQsQUFBVyxPQUFYLEFBQWtCLFNBQWxCLEFBQTJCLEdBQ3ZDO1FBQUEsR0FBQSxLQUFBLFFBQUE7O0FBQUEsU0FBQSxzQ0FBQTs7VUFBc0MsQUFBTyxPQUFQLEFBQU8sY0FBYTtx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QURNLEFBQ04sQUFBc0M7OztBQUN4QyxBQUFpQixrQkFBQSxBQUFDLE1BQUQsQUFBTztXQUFhLEFBQUMsS0FBQSxBQUFDLEVBQUYsQUFBRyxnQkFBSCxBQUFtQixNQUF2QyxBQUFvQixBQUF5Qjs7O0FBQzlELEFBQVk7V0FBRyxBQUFDLEtBQUosQUFBSTtBQUxsQixBQU9BOztBQVBBOztrQkFPZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZmluZCwgaXNEZWZpbmVkLCBpZGVudGl0eX0gZnJvbSBcImZhaXJtb250XCJcbmltcG9ydCBzcHJpbnRmIGZyb20gXCJzcHJpbnRmLWpzXCJcbmltcG9ydCBIIGZyb20gXCJoYW5kbGViYXJzXCJcbmltcG9ydCBTIGZyb20gXCJzd2FnXCJcblxuUy5yZWdpc3RlckhlbHBlcnMgSFxuam9pbiA9IChkLCBhcnJheSkgLT4gYXJyYXkuam9pbiBkXG5cbmJsb2NrID0gKGYpIC0+XG4gIChhcmdzLi4uLCBvcHRpb25zKSAtPlxuICAgIGlmIG9wdGlvbnMuZm4/XG4gICAgICBqb2luIFwiXCIsIGYgYXJncy4uLiwgb3B0aW9ucy5mblxuICAgIGVsc2VcbiAgICAgIGYgYXJncy4uLiwgaWRlbnRpdHlcblxuSC5yZWdpc3RlckhlbHBlclxuXG4gIGxldDogKGFyZ3MuLi4sIG9wdGlvbnMpIC0+XG4gICAgb3B0aW9ucy5mbiB0aGlzLCBkYXRhOiBvcHRpb25zLmRhdGEsIGJsb2NrUGFyYW1zOiBhcmdzXG5cbiAgdmFsdWVzOiBibG9jayAob2JqZWN0LCBmKSAtPiBmIHZhbHVlIGZvciBrZXksIHZhbHVlIG9mIG9iamVjdFxuXG4gIGZpbHRlcjogYmxvY2sgKHByb3BlcnR5LCB2YWx1ZSwgb2JqZWN0cywgZikgLT5cbiAgICAoZiBvYmplY3QpIGZvciBvYmplY3QgaW4gb2JqZWN0cyB3aGVuIG9iamVjdFtwcm9wZXJ0eV0gPT0gdmFsdWVcblxuICBwbHVjazogYmxvY2sgKHByb3BlcnR5LCBvYmplY3RzLCBmKSAtPlxuICAgIChmIG9iamVjdFtwcm9wZXJ0eV0pIGZvciBvYmplY3QgaW4gb2JqZWN0c1xuXG4gIGpvaW46IGJsb2NrIChkZWxpbWl0ZXIsIGFycmF5LCBmKSAtPlxuICAgIFsgam9pbiBkZWxpbWl0ZXIsIGFycmF5Lm1hcCBmIF1cblxuICBzcHJpbnRmOiAoZm9ybWF0LCBzdHJpbmcpIC0+IHNwcmludGYgZm9ybWF0LCBzdHJpbmdcblxuICBpbmRlbnQ6IChuLCBzdHJpbmcpIC0+XG4gICAgaW5kZW50ID0gKFwiIFwiLnJlcGVhdCBuKVxuICAgIHN0cmluZy5yZXBsYWNlIC9cXG4vZywgXCJcXG4je2luZGVudH1cIlxuXG4gIGhhbmc6IGRvIC0+XG4gICAgaW5kZW50ID0gKHgsIHMpIC0+IChcIiBcIi5yZXBlYXQgeCkgKyBzXG4gICAgKGksIHcsIHMpIC0+XG4gICAgICBtID0gdyAtIGlcbiAgICAgIFtmaXJzdCwgcmVzdC4uLl0gPSBzLm1hdGNoIC8vLy57MSwje219fShcXHMrfCQpLy8vZ1xuICAgICAgW2ZpcnN0LCAoKGluZGVudCBpLCBsaW5lKSBmb3IgbGluZSBpbiByZXN0KS4uLl0uam9pbiBcIlxcblwiXG5cbiAganNvbjogKHZhbHVlKSAtPiBKU09OLnN0cmluZ2lmeSB2YWx1ZSwgbnVsbCwgMlxuXG4gIG1hdGNoOiBibG9jayAocmUsIHMsIGYpIC0+XG4gICAgaWYgKGsgPSBzLm1hdGNoIChuZXcgUmVnRXhwIHJlLCBcImdcIikpXG4gICAgICBmIHYgZm9yIHYgaW4ga1xuICAgIGVsc2VcbiAgICAgIFtdXG5cbiAgcmVwbGFjZTogKHJlLCByLCBzKSAtPlxuICAgIHMucmVwbGFjZSAobmV3IFJlZ0V4cCByZSwgXCJnXCIpLCByXG5cbiAgcGljazogKGFyZ3MuLi4pIC0+XG4gICAgYXJncy5maW5kIGlzRGVmaW5lZFxuXG4gIHBhcnNlUGF0aDogYmxvY2sgKHMsIGYpIC0+XG4gICAgZiBwIGZvciBwIGluIFsgXCIvXCIsIHMuc3BsaXQoXCIvXCIpWzEuLl0uLi4gXVxuXG5cbmNsYXNzIFBhbmRhVGVtcGxhdGVcbiAgY29uc3RydWN0b3I6IC0+IEBIID0gSFxuICByZW5kZXI6ICh0ZW1wbGF0ZSwgY29udGV4dCkgLT5cbiAgICAoQEguY29tcGlsZSB0ZW1wbGF0ZSwgbm9Fc2NhcGU6IHRydWUpKGNvbnRleHQpXG4gIHJlZ2lzdGVyUGFydGlhbDogKG5hbWUsIHRlbXBsYXRlKSAtPiBASC5yZWdpc3RlclBhcnRpYWwgbmFtZSwgdGVtcGxhdGVcbiAgaGFuZGxlYmFyczogLT4gQEhcblxuZXhwb3J0IGRlZmF1bHQgUGFuZGFUZW1wbGF0ZVxuIl19
//# sourceURL=/Users/david/Repositories/panda-template/src/index.coffee