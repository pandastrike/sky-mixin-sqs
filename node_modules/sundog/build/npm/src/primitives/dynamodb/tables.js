"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _pandaGarden = require("panda-garden");

var _pandaParchment = require("panda-parchment");

var _pandaRiver = require("panda-river");

var _privateUtils = require("../private-utils");

var _queries = _interopRequireDefault(require("./queries"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//===========================================================================
// Tables
//===========================================================================
var DynamoDB,
    indexOf = [].indexOf;

DynamoDB = function (db) {
  var _areIndexesReady, _isTableReady, keysFilter, scan, tableCreate, tableDel, tableEmpty, tableGet, tableUpdate, tableWaitForDeleted, tableWaitForReady;

  ({
    scan
  } = (0, _queries.default)(db));

  tableGet = async function (name) {
    var Table, e;

    try {
      ({
        Table
      } = await db.describeTable({
        TableName: name
      }));
      return Table;
    } catch (error) {
      e = error;
      return (0, _privateUtils.notFound)(e, 400, "ResourceNotFoundException");
    }
  };

  tableCreate = async function (name, keys, attributes, throughput, options = {}) {
    var TableDescription, p;
    p = {
      TableName: name,
      KeySchema: keys,
      AttributeDefinitions: attributes,
      ProvisionedThroughput: throughput
    };
    ({
      TableDescription
    } = await db.createTable((0, _pandaParchment.merge)(p, options)));
    return TableDescription;
  };

  tableUpdate = async function (name, attributes, throughput, options = {}) {
    var TableDescription, p;
    p = {
      TableName: name,
      AttributeDefinitions: attributes
    };

    if (throughput) {
      p.ProvisionedThroughput = throughput;
    }

    ({
      TableDescription
    } = await db.updateTable((0, _pandaParchment.merge)(p, options)));
    return TableDescription;
  };

  tableDel = async function (name) {
    var e;

    try {
      return await db.deleteTable({
        TableName: name
      });
    } catch (error) {
      e = error;
      return (0, _privateUtils.notFound)(e);
    }
  };

  _isTableReady = async function (name) {
    var TableStatus;

    while (true) {
      ({
        TableStatus
      } = await tableGet(name));

      if (!TableStatus) {
        throw new Error(`Cannot find table ${name}`);
      } else if (TableStatus !== "ACTIVE") {
        await (0, _pandaParchment.sleep)(5000);
      } else {
        return true;
      }
    }
  };

  _areIndexesReady = async function (name) {
    var indexes, statuses;

    while (true) {
      ({
        GlobalSecondaryIndexes: indexes
      } = await tableGet(name));

      if (!indexes) {
        return true;
      }

      statuses = (0, _pandaRiver.collect)((0, _pandaRiver.project)("IndexStatus", indexes));

      if ((0, _pandaParchment.empty)((0, _pandaParchment.difference)(statuses, ["ACTIVE"]))) {
        return true;
      } else {
        await (0, _pandaParchment.sleep)(5000);
      }
    }
  }; // The optional second parameter allows the developer to also wait on all global secondary indexes to also be ready.


  tableWaitForReady = async function (name, indexWait) {
    var checks;
    checks = [_isTableReady(name)];

    if (indexWait) {
      checks.push(_areIndexesReady(name));
    }

    return await Promise.all(checks);
  };

  tableWaitForDeleted = async function (name) {
    var TableStatus;

    while (true) {
      ({
        TableStatus
      } = await tableGet(name));

      if (!TableStatus) {
        return true;
      } else {
        await (0, _pandaParchment.sleep)(5000);
      }
    }
  }; // TODO: make this more efficient by throttling to X connections at once. AWS
  // only supports N requests per second from an account, and I don't want this
  // to violate that limit, but we can do better than one at a time.


  keysFilter = (0, _pandaGarden.curry)(function (keys, item) {
    var f;

    f = function (key) {
      return indexOf.call(keys, key) >= 0;
    };

    return (0, _pandaParchment.pick)(f, item);
  });

  tableEmpty = async function (name) {
    var Items, KeySchema, filter, i, j, len, results;
    ({
      KeySchema
    } = await tableGet(name));
    filter = keysFilter((0, _pandaRiver.collect)((0, _pandaRiver.project)("AttributeName", KeySchema)));
    ({
      Items
    } = await scan(name));
    results = [];

    for (j = 0, len = Items.length; j < len; j++) {
      i = Items[j];
      results.push((await del(name, filter(i))));
    }

    return results;
  };

  return {
    tableGet,
    tableCreate,
    tableUpdate,
    tableDel,
    tableWaitForReady,
    tableWaitForDeleted,
    keysFilter,
    tableEmpty
  };
};

var _default = DynamoDB;
exports.default = _default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9zdW5kb2cvc3JjL3ByaW1pdGl2ZXMvZHluYW1vZGIvdGFibGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFQQTs7O0FBQUEsSUFBQSxRQUFBO0FBQUEsSUFBQSxPQUFBLEdBQUEsR0FBQSxPQUFBOztBQVNBLFFBQUEsR0FBVyxVQUFBLEVBQUEsRUFBQTtBQUNULE1BQUEsZ0JBQUEsRUFBQSxhQUFBLEVBQUEsVUFBQSxFQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLEVBQUEsV0FBQSxFQUFBLG1CQUFBLEVBQUEsaUJBQUE7O0FBQUEsR0FBQTtBQUFBLElBQUE7QUFBQSxNQUFTLHNCQUFULEVBQVMsQ0FBVDs7QUFFQSxFQUFBLFFBQUEsR0FBVyxnQkFBQSxJQUFBLEVBQUE7QUFDVCxRQUFBLEtBQUEsRUFBQSxDQUFBOztBQUFBLFFBQUE7QUFDRSxPQUFBO0FBQUEsUUFBQTtBQUFBLFVBQVUsTUFBTSxFQUFFLENBQUYsYUFBQSxDQUFpQjtBQUFBLFFBQUEsU0FBQSxFQUFXO0FBQVgsT0FBakIsQ0FBaEI7YUFERixLO0FBQUEsS0FBQSxDQUFBLE9BQUEsS0FBQSxFQUFBO0FBR00sTUFBQSxDQUFBLEdBQUEsS0FBQTthQUNKLDRCQUFBLENBQUEsRUFBQSxHQUFBLEVBSkYsMkJBSUUsQzs7QUFMTyxHQUFYOztBQU9BLEVBQUEsV0FBQSxHQUFjLGdCQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsRUFBcUMsT0FBQSxHQUFyQyxFQUFBLEVBQUE7QUFDWixRQUFBLGdCQUFBLEVBQUEsQ0FBQTtBQUFBLElBQUEsQ0FBQSxHQUNFO0FBQUEsTUFBQSxTQUFBLEVBQUEsSUFBQTtBQUNBLE1BQUEsU0FBQSxFQURBLElBQUE7QUFFQSxNQUFBLG9CQUFBLEVBRkEsVUFBQTtBQUdBLE1BQUEs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SUFBQSxpQkFBQTtBQUFBLElBQUEsbUJBQUE7QUFBQSxJQUFBLFVBQUE7QUFBQSxJQUFBO0FBQUEsRztBQXBGUyxDQUFYOztlQXNGZSxRIiwic291cmNlc0NvbnRlbnQiOlsiIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyBUYWJsZXNcbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmltcG9ydCB7Y3Vycnl9IGZyb20gXCJwYW5kYS1nYXJkZW5cIlxuaW1wb3J0IHttZXJnZSwgc2xlZXAsIGVtcHR5LCBkaWZmZXJlbmNlLCBwaWNrfSBmcm9tIFwicGFuZGEtcGFyY2htZW50XCJcbmltcG9ydCB7Y29sbGVjdCwgcHJvamVjdH0gZnJvbSBcInBhbmRhLXJpdmVyXCJcbmltcG9ydCB7bm90Rm91bmR9IGZyb20gXCIuLi9wcml2YXRlLXV0aWxzXCJcbmltcG9ydCBRdWVyaWVzIGZyb20gXCIuL3F1ZXJpZXNcIlxuXG5EeW5hbW9EQiA9IChkYikgLT5cbiAge3NjYW59ID0gUXVlcmllcyBkYlxuXG4gIHRhYmxlR2V0ID0gKG5hbWUpIC0+XG4gICAgdHJ5XG4gICAgICB7VGFibGV9ID0gYXdhaXQgZGIuZGVzY3JpYmVUYWJsZSBUYWJsZU5hbWU6IG5hbWVcbiAgICAgIFRhYmxlXG4gICAgY2F0Y2ggZVxuICAgICAgbm90Rm91bmQgZSwgNDAwLCBcIlJlc291cmNlTm90Rm91bmRFeGNlcHRpb25cIlxuXG4gIHRhYmxlQ3JlYXRlID0gKG5hbWUsIGtleXMsIGF0dHJpYnV0ZXMsIHRocm91Z2hwdXQsIG9wdGlvbnM9e30pIC0+XG4gICAgcCA9XG4gICAgICBUYWJsZU5hbWU6IG5hbWVcbiAgICAgIEtleVNjaGVtYToga2V5c1xuICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IGF0dHJpYnV0ZXNcbiAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogdGhyb3VnaHB1dFxuXG4gICAge1RhYmxlRGVzY3JpcHRpb259PSBhd2FpdCBkYi5jcmVhdGVUYWJsZSBtZXJnZSBwLCBvcHRpb25zXG4gICAgVGFibGVEZXNjcmlwdGlvblxuXG4gIHRhYmxlVXBkYXRlID0gKG5hbWUsIGF0dHJpYnV0ZXMsIHRocm91Z2hwdXQsIG9wdGlvbnM9e30pIC0+XG4gICAgcCA9XG4gICAgICBUYWJsZU5hbWU6IG5hbWVcbiAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBhdHRyaWJ1dGVzXG4gICAgcC5Qcm92aXNpb25lZFRocm91Z2hwdXQgPSB0aHJvdWdocHV0IGlmIHRocm91Z2hwdXRcblxuICAgIHtUYWJsZURlc2NyaXB0aW9ufT0gYXdhaXQgZGIudXBkYXRlVGFibGUgbWVyZ2UgcCwgb3B0aW9uc1xuICAgIFRhYmxlRGVzY3JpcHRpb25cblxuICB0YWJsZURlbCA9IChuYW1lKSAtPlxuICAgIHRyeVxuICAgICAgYXdhaXQgZGIuZGVsZXRlVGFibGUgVGFibGVOYW1lOiBuYW1lXG4gICAgY2F0Y2ggZVxuICAgICAgbm90Rm91bmQgZVxuXG5cbiAgX2lzVGFibGVSZWFkeSA9IChuYW1lKSAtPlxuICAgIHdoaWxlIHRydWVcbiAgICAgIHtUYWJsZVN0YXR1c30gPSBhd2FpdCB0YWJsZUdldCBuYW1lXG4gICAgICBpZiAhVGFibGVTdGF0dXNcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwiQ2Fubm90IGZpbmQgdGFibGUgI3tuYW1lfVwiXG4gICAgICBlbHNlIGlmIFRhYmxlU3RhdHVzICE9IFwiQUNUSVZFXCJcbiAgICAgICAgYXdhaXQgc2xlZXAgNTAwMFxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuXG4gIF9hcmVJbmRleGVzUmVhZHkgPSAobmFtZSkgLT5cbiAgICB3aGlsZSB0cnVlXG4gICAgICB7R2xvYmFsU2Vjb25kYXJ5SW5kZXhlczogaW5kZXhlc30gPSBhd2FpdCB0YWJsZUdldCBuYW1lXG4gICAgICByZXR1cm4gdHJ1ZSBpZiAhaW5kZXhlc1xuICAgICAgc3RhdHVzZXMgPSBjb2xsZWN0IHByb2plY3QgXCJJbmRleFN0YXR1c1wiLCBpbmRleGVzXG4gICAgICBpZiBlbXB0eSBkaWZmZXJlbmNlIHN0YXR1c2VzLCBbXCJBQ1RJVkVcIl1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGVsc2VcbiAgICAgICAgYXdhaXQgc2xlZXAgNTAwMFxuXG4gICMgVGhlIG9wdGlvbmFsIHNlY29uZCBwYXJhbWV0ZXIgYWxsb3dzIHRoZSBkZXZlbG9wZXIgdG8gYWxzbyB3YWl0IG9uIGFsbCBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4ZXMgdG8gYWxzbyBiZSByZWFkeS5cbiAgdGFibGVXYWl0Rm9yUmVhZHkgPSAobmFtZSwgaW5kZXhXYWl0KSAtPlxuICAgIGNoZWNrcyA9IFtfaXNUYWJsZVJlYWR5IG5hbWVdXG4gICAgY2hlY2tzLnB1c2ggX2FyZUluZGV4ZXNSZWFkeSBuYW1lIGlmIGluZGV4V2FpdFxuICAgIGF3YWl0IFByb21pc2UuYWxsIGNoZWNrc1xuXG4gIHRhYmxlV2FpdEZvckRlbGV0ZWQgPSAobmFtZSkgLT5cbiAgICB3aGlsZSB0cnVlXG4gICAgICB7VGFibGVTdGF0dXN9ID0gYXdhaXQgdGFibGVHZXQgbmFtZVxuICAgICAgaWYgIVRhYmxlU3RhdHVzXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBlbHNlXG4gICAgICAgIGF3YWl0IHNsZWVwIDUwMDBcblxuICAjIFRPRE86IG1ha2UgdGhpcyBtb3JlIGVmZmljaWVudCBieSB0aHJvdHRsaW5nIHRvIFggY29ubmVjdGlvbnMgYXQgb25jZS4gQVdTXG4gICMgb25seSBzdXBwb3J0cyBOIHJlcXVlc3RzIHBlciBzZWNvbmQgZnJvbSBhbiBhY2NvdW50LCBhbmQgSSBkb24ndCB3YW50IHRoaXNcbiAgIyB0byB2aW9sYXRlIHRoYXQgbGltaXQsIGJ1dCB3ZSBjYW4gZG8gYmV0dGVyIHRoYW4gb25lIGF0IGEgdGltZS5cbiAga2V5c0ZpbHRlciA9IGN1cnJ5IChrZXlzLCBpdGVtKSAtPlxuICAgIGYgPSAoa2V5KSAtPiBrZXkgaW4ga2V5c1xuICAgIHBpY2sgZiwgaXRlbVxuXG4gIHRhYmxlRW1wdHkgPSAobmFtZSkgLT5cbiAgICB7S2V5U2NoZW1hfSA9IGF3YWl0IHRhYmxlR2V0IG5hbWVcbiAgICBmaWx0ZXIgPSBrZXlzRmlsdGVyIGNvbGxlY3QgcHJvamVjdCBcIkF0dHJpYnV0ZU5hbWVcIiwgS2V5U2NoZW1hXG5cbiAgICB7SXRlbXN9ID0gYXdhaXQgc2NhbiBuYW1lXG4gICAgYXdhaXQgZGVsIG5hbWUsIGZpbHRlcihpKSBmb3IgaSBpbiBJdGVtc1xuXG4gIHt0YWJsZUdldCwgdGFibGVDcmVhdGUsIHRhYmxlVXBkYXRlLCB0YWJsZURlbCwgdGFibGVXYWl0Rm9yUmVhZHksIHRhYmxlV2FpdEZvckRlbGV0ZWQsIGtleXNGaWx0ZXIsIHRhYmxlRW1wdHl9XG5cbmV4cG9ydCBkZWZhdWx0IER5bmFtb0RCXG4iXSwic291cmNlUm9vdCI6IiJ9
//# sourceURL=/Users/david/repos/sundog/src/primitives/dynamodb/tables.coffee